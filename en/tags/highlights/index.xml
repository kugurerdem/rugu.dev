<?xml version="1.0" encoding="utf-8" standalone="yes"?><rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom"><channel><title>Highlights on UÄŸur Erdem Seyfi</title><link>https://rugu.dev/en/tags/highlights/</link><description>Recent content in Highlights on UÄŸur Erdem Seyfi</description><generator>Hugo -- gohugo.io</generator><language>en</language><lastBuildDate>Thu, 25 Dec 2025 00:00:00 +0000</lastBuildDate><atom:link href="https://rugu.dev/en/tags/highlights/index.xml" rel="self" type="application/rss+xml"/><item><title>Using The Corne Split Keyboard For Half A Year</title><link>https://rugu.dev/en/blog/corne/</link><pubDate>Thu, 25 Dec 2025 00:00:00 +0000</pubDate><guid>https://rugu.dev/en/blog/corne/</guid><description>&lt;p&gt;I built my own Corne keyboard around six months ago, in July. I have been using it ever since. Although I am no expert on split keyboards, I accumulated a fair amount of observations during this whole process. I thought that if I wrote down my experiences, they might still be of interest to people who are considering whether to try a split keyboard. Or, if they are already using one, maybe they can also benefit from some of the tricks that helped me a lot. So, here it is: a blog post about how and why I built my own Corne keyboard, the things I learned and applied to improve my ergonomics over the last 6 months.&lt;/p&gt;
&lt;p&gt;&lt;img src="https://rugu.dev/en/blog/corne/corne-with-white-case.jpg#75persize" alt=""&gt;&lt;/p&gt;
&lt;p&gt;I will first talk about my overall reasons for choosing such a niche keyboard, then why and how I built it. Finally, I will share some very cool tips and tricks about how I played with the layout to make my Corne fit my specific needs better.&lt;/p&gt;
&lt;p&gt;Let us get started without losing any more time. :)&lt;/p&gt;
&lt;h2 id="why-a-split-keyboard"&gt;Why A Split Keyboard?&lt;/h2&gt;
&lt;p&gt;Whenever a friend sees my Corne keyboard, they usually ask what it is, where I got it from, and why I am using it. Sometimes they want to try it, and I let them play around with it for a bit. After a few minutes, the reaction is almost always the same: they tell me that it is hard and frustrating to use. I understand this. It definitely looks strange, and it is far from a natural typing experience for someone who is used to a &amp;ldquo;normal&amp;rdquo; keyboard. Still, I want to try my best to explain why I decided to use a split keyboard in the first place.&lt;/p&gt;
&lt;p&gt;I can think of three possible reasons for using a split keyboard. First, they look cool, and some people simply enjoy trying cool things. Second, there is the promise of improved typing speed or efficiency. Third, and most importantly for me, they are often more ergonomic and natural for the body. I admit that the aesthetics played a small role in my decision as well, but the primary factor was simply ergonomics.&lt;/p&gt;
&lt;p&gt;For some context, I have been dealing with neck and back pain for quite a while. For this, I had already spent a lot of time thinking about office ergonomics. I regularly use laptop and monitor stands to keep my screen at eye level. I pay attention to chair and desk height, distance, and how they relate to my posture and leg position. I have also invested in a standing desk and a chair that I find comfortable for long work sessions. I also started learning more about biomechanics and began exercising more regularly. &lt;sup id="fnref:1"&gt;&lt;a href="#fn:1" class="footnote-ref" role="doc-noteref"&gt;1&lt;/a&gt;&lt;/sup&gt;&lt;/p&gt;
&lt;p&gt;This made me think about how I could further improve my ergonomics. After some thinking, it became obvious that the two things I interact with the most when using a computer are my keyboard and mouse. A quick research pointed me toward two promising upgrades for my setup: a split keyboard and a vertical mouse.&lt;/p&gt;
&lt;p&gt;Both made sense to me. A vertical mouse more closely resembles a neutral hand position, which can help reduce awkward wrist movements. With a split keyboard, the ability to position the two halves independently allows the wrists to remain in a more neutral alignment. This same split setup, combined with the option to place the halves farther apart, also helps reduce internal shoulder rotation. Over time, this can improve shoulder comfort and may even reduce neck strain.&lt;/p&gt;
&lt;p&gt;To give you a brief idea, the following image from &lt;a href="https://boardsource.xyz/products/unicorne-lp-aluminum-corne-case"&gt;boardsource.xyz&lt;/a&gt; demonstrates this really well.&lt;/p&gt;
&lt;p&gt;&lt;img src="https://images.boardsource.xyz/Copy%20of%20_ergo_comparison_split.jpg" alt=""&gt;&lt;/p&gt;
&lt;h2 id="why-ortholinear"&gt;Why Ortholinear?&lt;/h2&gt;
&lt;p&gt;Another concept that I came across while researching this topic was &amp;ldquo;ortholinear&amp;rdquo;. Here, &amp;ldquo;ortho&amp;rdquo; means right-angled, and &amp;ldquo;linear&amp;rdquo; means arranged in lines. So, an ortholinear keyboard is one where the keys are placed in a straight grid of aligned rows and columns instead of being staggered.&lt;/p&gt;
&lt;p&gt;For those who are further interested, I recommend checking out &lt;a href="https://mattgemmell.scot/the-planck-keyboard/"&gt;The Planck Keyboard&lt;/a&gt; blog post by Matt Gemmell. Just to give you a brief idea of what an ortholinear keyboard looks like, here is a photo of his keyboard:&lt;/p&gt;
&lt;p&gt;&lt;img src="https://live.staticflickr.com/65535/51350002123_c951701270_c_d.jpg#75persize" alt=""&gt;&lt;/p&gt;
&lt;p&gt;This makes sense to me. However, I was concerned that, since an ortholinear keyboard is usually narrower than a normal one, it might cause more wrist deviation. So I did not want to try a non-split ortholinear keyboard such as the Planck. Still, I wanted my split keyboard to be ortholinear, because being able to align the two halves already solves the wrist deviation problem.&lt;/p&gt;
&lt;p&gt;So, a split, ortholinear keyboard it is. But there is still one very important question: why choose the Corne over the many other split keyboards available?&lt;/p&gt;
&lt;h2 id="why-corne-specifically"&gt;Why Corne, Specifically?&lt;/h2&gt;
&lt;p&gt;When I first looked into the list of split keyboards being recommended, I was baffled. Not only are there so many alternatives, but they also differ a lot.&lt;/p&gt;
&lt;p&gt;Just to give an example, consider something as minimalist as &lt;a href="https://github.com/pashutk/chocofi"&gt;ChocoFi&lt;/a&gt; and something as full-fledged as &lt;a href="https://www.zsa.io/moonlander"&gt;Moonlander&lt;/a&gt;. Both are split keyboards, yet the difference between them is immediately obvious.&lt;/p&gt;
&lt;p&gt;This is how I quickly realized that it would be better for me to first set my expectations and then filter them. Not the other way around of trying to learn all the subtleties and then trying to make an educated guess.&lt;/p&gt;
&lt;p&gt;Since it would be my first attempt at a split keyboard, I wanted a keyboard with a community around it. This way, I could benefit from the experiences of other people and find answers to my questions if I ever had them.&lt;/p&gt;
&lt;p&gt;The split keyboard being open source was also very important, because rebuying it if something ever went wrong was not an option. This is not only due to the prices, but also because customs regulations in Turkey currently make ordering items from abroad very difficult. For example, anything above 30 euros, including shipping, requires a formal customs declaration and additional fees. Likewise, the number of orders that can be placed is limited on a monthly basis, and at the moment, this limit is five orders per month. On top of this, there is not much of a marketplace for split keyboards in Turkey either. That meant I either had to ask friends abroad to buy parts for me as a gift, or obtain the components separately and solder and assemble the keyboard myself. I chose the second option because it made me less dependent on others. I could still ask for keyboard help if needed, but if something went wrong, fixing it myself would at least be possible.&lt;/p&gt;
&lt;p&gt;And of course, the keyboard had to be ergonomic. In fact, I was okay with going with split keyboards that prioritize ergonomics more, even at the expense of challenging my habits. I was okay to try new things if I was convinced of the possible benefits.&lt;/p&gt;
&lt;p&gt;So, after some market research, my final decision came down to &lt;a href="https://old.reddit.com/r/ErgoMechKeyboards/comments/17ygfe5/lily58_vs_corne_for_a_first_timer/"&gt;Corne vs Lily58&lt;/a&gt;. Both of them seemed to satisfy my main requirements, with one key difference between them. The Lily58 has 58 keys, while the Corne has only 42.&lt;/p&gt;
&lt;p&gt;In practice, this means that the entire number row and a few additional keys are removed on the Corne to make it more compact. Access to those missing keys is handled through layer combinations instead. On paper, I liked the idea that it would reduce overall hand movement. However, my main concern was whether I would actually like the experience or not.&lt;/p&gt;
&lt;p&gt;Since I could not clearly decide which one to go with, I went YOLO. I decided to build the Corne myself and asked my friend Onur to bring me a Lily58 for personal use.&lt;/p&gt;
&lt;h2 id="building-the-corne-keyboard"&gt;Building The Corne Keyboard&lt;/h2&gt;
&lt;p&gt;Before starting on my own, I wanted to see if anyone else in Turkey has already built a split keyboard. I found a subreddit called &lt;a href="https://www.reddit.com/r/mechistanbul/"&gt;MechIstanbul&lt;/a&gt;, where there were lots of split keyboard builds. Although the subreddit itself seemed to be inactive, I realized that their &lt;a href="https://t.me/mechistanbul"&gt;Telegram group&lt;/a&gt; was still very active. There, I was able to ask some of the questions that I had in mind to the experts directly :) I&amp;rsquo;m especially indebted to a member named Erdem (yes, we share the same name) who helped me a lot with choosing which parts to order and from where for a Corne keyboard build.&lt;/p&gt;
&lt;p&gt;After having a better sense of which parts I needed to order, I bought all the parts that were essential for a split Corne keyboard through AliExpress. Specifically, I used all of my monthly order limitations for the following items (each order under a 30 EUR cost):&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;100 XDA keycaps.&lt;/strong&gt; There was no particular reason behind this choice. I was just browsing keycaps, and these simply looked nice.&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;110 Outemu Silent Yellow switches.&lt;/strong&gt; I wanted my split keyboard to be relatively quiet. I went with Outemu instead of Cherry MX mainly because they were cheaper. I couldn&amp;rsquo;t spot any significant difference between the two when listening to sound comparisons between the two.&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;5 NRF52840 MCUs.&lt;/strong&gt; These basically share the same interfaces and functionalities as nice!nano MCUs, but they are much cheaper.&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;A Corne PCB kit,&lt;/strong&gt; which includes the Corne circuit boards, diodes, hot swappable sockets (so that the switches are not soldered directly to the board and can be easily replaced later), TRRS jacks, and similar components.&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;Upper and lower plates&lt;/strong&gt; to sandwich the PCB. These serve both as a protective layer and as an aesthetic element.&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;If you are further interested, here is the list of all parts with their costs:&lt;/p&gt;
&lt;p&gt;&lt;img src="https://pbs.twimg.com/media/GxwUUDsXYAAnAWZ?format=png&amp;amp;name=large" alt=""&gt;&lt;/p&gt;
&lt;p&gt;Keep in mind that I bought most of the parts in double the needed amount, just in case I use them for another keyboard later.&lt;/p&gt;
&lt;p&gt;After the orders reached, I simply followed the tutorials available on the internet. &lt;sup id="fnref:2"&gt;&lt;a href="#fn:2" class="footnote-ref" role="doc-noteref"&gt;2&lt;/a&gt;&lt;/sup&gt;&lt;/p&gt;
&lt;p&gt;While watching the video, I noticed that the soldering part looked a bit tedious. Since I had never done soldering before, I did not want to risk the process. So, I went to my cousin, who is experienced with soldering, and asked for help. Thankfully, he helped a lot. After that, I plugged in the parts, installed the ZMK firmware on the MCUs, and then programmed the left and right halves using the &lt;a href="https://nickcoutsos.github.io/keymap-editor/"&gt;Keymap Editor&lt;/a&gt;.&lt;/p&gt;
&lt;p&gt;Of course, there were a few minor issues along the way. For example, the female pins we soldered onto the PCB were slightly too long, which caused the MCU to sit a bit higher than intended and left insufficient space to attach the covers properly. We also accidentally stripped the soldered area on the battery during soldering, and ended up breaking the on-off switch as well.&lt;/p&gt;
&lt;p&gt;But, despite these problems, I think that the overall result was still good enough, and I finally had a keyboard that was fully usable.&lt;/p&gt;
&lt;p&gt;&lt;img src="https://rugu.dev/en/blog/corne/corne-first-iteration.jpg#75persize" alt=""&gt;&lt;/p&gt;
&lt;h2 id="the-overall-user-experience"&gt;The Overall User Experience&lt;/h2&gt;
&lt;h3 id="speed"&gt;Speed&lt;/h3&gt;
&lt;p&gt;The moment I had my Corne keyboard working, the first thing I did was open &lt;a href="https://monkeytype.com/"&gt;MonkeyType&lt;/a&gt; and see how fast I could type things down. It was 3 words per minute in my first try. On the second try, it was a bit better, and after a few iterations, I was able to get around 60 WPM in the same hour in which I started experimenting. It&amp;rsquo;s not really fast compared to my usual speed. &lt;sup id="fnref:3"&gt;&lt;a href="#fn:3" class="footnote-ref" role="doc-noteref"&gt;3&lt;/a&gt;&lt;/sup&gt; But it was still good enough for me to get things done using this keyboard.&lt;/p&gt;
&lt;p&gt;I can say that after around two days of using the Corne keyboard, I was getting 90 to 100 WPM, which was about 80 to 90 percent of my previous performance. This was sufficient for me to use the keyboard effectively at work.&lt;/p&gt;
&lt;p&gt;I believe this shows two things. First, as many people expect, changing from a normal staggered layout to an ortholinear split layout decreases your typing speed tremendously at first. Second, it is not that hard to recover from that decrease. In fact, not long after that, around three weeks later, I was able to &lt;a href="https://x.com/kugurerdem/status/1961393205053644993"&gt;beat&lt;/a&gt; my previous typing record on MonkeyType with 139 WPM.&lt;/p&gt;
&lt;p&gt;&lt;img src="https://rugu.dev/en/blog/corne/139wpm.jpg" alt=""&gt;&lt;/p&gt;
&lt;p&gt;I do not know about other people, but for me, the main reason I slowed down when I first started using the Corne keyboard was not that it was split. I think one reason was simply that the keys are in an ortholinear layout. For example, at the beginning, I used to type &amp;lsquo;C&amp;rsquo; a lot when I meant to type &amp;lsquo;X&amp;rsquo;. This is because I was so used to a staggered layout that when I typed from the row below the home row, my fingers naturally moved a little to the right. I had to unlearn that habit.&lt;/p&gt;
&lt;h3 id="getting-used-to-layer-keys"&gt;Getting Used To Layer Keys&lt;/h3&gt;
&lt;p&gt;Besides unlearning some of my previous habits, I also realized that I needed to learn new ways of typing special characters. The Corne has fewer keys than a typical keyboard, and as a result, letters and modifier keys occupy almost all of the base layer. This means that other characters, such as curly braces &lt;code&gt;{}&lt;/code&gt;, square brackets &lt;code&gt;[]&lt;/code&gt;, and even numbers, have to be typed using layer keys.&lt;/p&gt;
&lt;p&gt;For example, pressing the key that corresponds to q on the base layer produces &lt;code&gt;q&lt;/code&gt;. Pressing the same key while holding the layer 1 key produces &lt;code&gt;1&lt;/code&gt;, and holding the layer 2 key produces &lt;code&gt;!&lt;/code&gt;.&lt;/p&gt;
&lt;p&gt;To give a concrete idea, this is how my keys behave when I am holding the &lt;strong&gt;layer 1 key&lt;/strong&gt;:&lt;/p&gt;
&lt;p&gt;&lt;img src="https://rugu.dev/en/blog/corne/layer1_corne.png" alt=""&gt;&lt;/p&gt;
&lt;p&gt;And this is how they behave when I am holding the &lt;strong&gt;layer 2 key&lt;/strong&gt;:&lt;/p&gt;
&lt;p&gt;&lt;img src="https://rugu.dev/en/blog/corne/layer2_corne.png" alt=""&gt;&lt;/p&gt;
&lt;p&gt;This might seem a bit confusing at first, but when you think about it, &lt;strong&gt;layer keys are not very different from modifier keys like Shift or Ctrl. They simply change the behavior of the other keys while they are being held.&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;As for how long it took to get used to these keybindings, adapting to layer 1 was especially easy for me, and layer 2 was not much harder either.&lt;/p&gt;
&lt;p&gt;One important thing I noticed is that &lt;strong&gt;I adapted faster to the special characters I used most often than to the ones I used less frequently. This is actually good news, because the characters you need the most become available to you first.&lt;/strong&gt;&lt;/p&gt;
&lt;h3 id="embracing-less-is-more"&gt;Embracing &amp;ldquo;Less is More&amp;rdquo;&lt;/h3&gt;
&lt;p&gt;I think the Corne keyboard is a good example of &lt;a href="https://en.wikipedia.org/wiki/Less_is_more"&gt;less is more&lt;/a&gt;. You are reducing the number of available keys, but you still gain more than you had before: better ergonomics, more speed, and more precision. Realizing this made me wonder whether I could push the idea more. For example, could I reduce pinky usage even further by removing the sixth column from the keyboard?&lt;/p&gt;
&lt;p&gt;After coming across &amp;ldquo;the endgame keyboard&amp;rdquo; video by Joshua Blais, I realized that I could even go further.&lt;/p&gt;
&lt;div style="position: relative; padding-bottom: 56.25%; height: 0; overflow: hidden;"&gt;
 &lt;iframe allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share; fullscreen" loading="eager" referrerpolicy="strict-origin-when-cross-origin" src="https://www.youtube.com/embed/Ong_-2G9RDM?autoplay=0&amp;amp;controls=1&amp;amp;end=0&amp;amp;loop=0&amp;amp;mute=0&amp;amp;start=0" style="position: absolute; top: 0; left: 0; width: 100%; height: 100%; border:0;" title="YouTube video"&gt;&lt;/iframe&gt;
 &lt;/div&gt;

&lt;p&gt;I started thinking about ways to reduce my pinky usage. Erdem from the MechIstanbul community sent me the &lt;a href="https://mattgemmell.scot/home-row-mods/"&gt;Home Row Mods&lt;/a&gt; post by Matt Gemmel again. It was a great read. To summarize the main idea, you can define custom behaviors for certain keys so that they act as modifier keys when held and as normal keys when tapped.&lt;/p&gt;
&lt;p&gt;This lets you move most of the modifier keys that are usually pressed with the pinkies onto the home row, reducing pinky strain even further. What I did was mirror the home row modifier keys on both halves of the keyboard. This way, when I need to press a key on the left side with a modifier, I can use the modifier on the right side, and vice versa.&lt;/p&gt;
&lt;p&gt;Here is what my default layout looks right now:&lt;/p&gt;
&lt;p&gt;&lt;img src="https://rugu.dev/en/blog/corne/default_corne_layer.png" alt=""&gt;&lt;/p&gt;
&lt;p&gt;As you can see, I have four empty keys in total, which means I am actively using 38 keys. I still rely heavily on my right pinky, but I recently realized that some of those keys can be moved to the empty thumb positions. I can also start using &lt;a href="https://zmk.dev/docs/keymaps/combos"&gt;combo keys&lt;/a&gt;, a custom behavior that allows certain characters to be typed by pressing two keys together. However, at the time I was configuring my keyboard, this setup seemed acceptable.&lt;/p&gt;
&lt;h3 id="emphasis-on-thumb-keys"&gt;Emphasis on Thumb Keys&lt;/h3&gt;
&lt;p&gt;One thing I quickly noticed when using this keyboard was that it shifts some of the load that was previously placed on the pinkies onto the thumbs. Normally, I used my thumbs only for pressing the space key. With this keyboard, each thumb is assigned three keys. The important point is that these thumb keys usually replace functions that were previously handled by the pinkies.&lt;/p&gt;
&lt;p&gt;I think this is very good overall. Because it kindof balances the load between your fingers. At the same time, if your thumbs are sensitive, this change can make things worse rather than better. After using the Corne keyboard for a few weeks, I noticed a slight pain in my thumbs. It was concerning, so I took a break over the weekend, and the pain went away. It never returned. I suspect this was either due to my hands adapting to the new layout or a minor strain from doing knuckle push-ups and pull-ups around the time. Even so, the experience made me realize that these keyboards may not be ideal for people with sensitive thumbs.&lt;/p&gt;
&lt;h2 id="what-about-lily58"&gt;What About Lily58?&lt;/h2&gt;
&lt;p&gt;You might remember that in the Why Corne Specifically? section, I mentioned that during my decision period between the Corne and the Lily58, I went YOLO and decided to try both.&lt;/p&gt;
&lt;p&gt;Well&amp;hellip; By the time my friend handed me a Halycon Lily58 kit that was bought from &lt;a href="https://splitkb.com"&gt;splitkb.com&lt;/a&gt;, it was already too late. I was already certain that I was not going to leave the Corne anytime soon. I had adapted to it extremely well and was not really seeking the additional keys that the Lily58 offered anyway. In other words, even if I used the Lily58, I would most likely stick to the same keybindings and layouts that I already use on my Corne keyboard.&lt;/p&gt;
&lt;p&gt;So, I asked a couple of my friends whether they would be interested in using the keyboard. Thankfully, &lt;a href="https://x.com/mertcobanov"&gt;Mert&lt;/a&gt; was interested, so I handed my Lily58 over to him. ðŸ™‚&lt;/p&gt;
&lt;p&gt;&lt;img src="https://rugu.dev/en/blog/corne/halycon-lily58.jpg#75persize" alt=""&gt;&lt;/p&gt;
&lt;p&gt;Goodbye, Lily58.&lt;/p&gt;
&lt;h2 id="so-whats-next"&gt;So, What&amp;rsquo;s Next?&lt;/h2&gt;
&lt;p&gt;So far, I am very fond of my Corne, but I have a feeling that I could eventually switch to a 5x3 layout. I already have a PCB for a wireless Choc Corne at home, and I plan to build it in one of my spare periods. I also want to improve my CAD skills and experiment with 3D printed cases and rests designed specifically for my own needs. For now, however, I am happy with my current Corne, and I think the best next step is to start using this 6x3 keyboard as if it were a 5x3.&lt;/p&gt;
&lt;p&gt;Anyway, thanks for reading this far. I hope this post was helpful for at least some of you.&lt;/p&gt;
&lt;p&gt;I would also like to thank &lt;a href="https://github.com/SingularHomology"&gt;Oussama&lt;/a&gt; for reviewing the initial draft of this post.&lt;/p&gt;
&lt;div class="footnotes" role="doc-endnotes"&gt;
&lt;hr&gt;
&lt;ol&gt;
&lt;li id="fn:1"&gt;
&lt;p&gt;I can say that exercise helped me the most on a personal level. Still, paying attention to ergonomics was also very helpful. To me, exercise feels like a way to increase my overall tolerance, while improving ergonomics is more about reducing the damage. Because of that, I wanted to take the best of both worlds as much as possible.&amp;#160;&lt;a href="#fnref:1" class="footnote-backref" role="doc-backlink"&gt;&amp;#x21a9;&amp;#xfe0e;&lt;/a&gt;&lt;/p&gt;
&lt;/li&gt;
&lt;li id="fn:2"&gt;
&lt;p&gt;I found both &lt;a href="https://www.youtube.com/watch?v=vzDTdLaAzXc"&gt;this video&lt;/a&gt; from Josean Martinez and &lt;a href="https://www.youtube.com/watch?v=FJgvi7WShxY"&gt;this one&lt;/a&gt; from Joe Scotto, very helpful during the process.&amp;#160;&lt;a href="#fnref:2" class="footnote-backref" role="doc-backlink"&gt;&amp;#x21a9;&amp;#xfe0e;&lt;/a&gt;&lt;/p&gt;
&lt;/li&gt;
&lt;li id="fn:3"&gt;
&lt;p&gt;Just to give you an idea, I used to be able to consistently type around 110+ WPM on MonkeyType with my Logitech K380.&amp;#160;&lt;a href="#fnref:3" class="footnote-backref" role="doc-backlink"&gt;&amp;#x21a9;&amp;#xfe0e;&lt;/a&gt;&lt;/p&gt;
&lt;/li&gt;
&lt;/ol&gt;
&lt;/div&gt;</description></item><item><title>Why I'm Leaving NixOS After a Year?</title><link>https://rugu.dev/en/blog/leaving-nixos/</link><pubDate>Sun, 03 Aug 2025 00:00:00 +0000</pubDate><guid>https://rugu.dev/en/blog/leaving-nixos/</guid><description>&lt;p&gt;Around a year ago, I published a blog post explaining my overall experience &lt;a href="https://www.rugu.dev/en/blog/nixos/"&gt;Switching from Arch to NixOS&lt;/a&gt;. You can read it if you&amp;rsquo;re interested in my early experiences, but, to give you a spoiler, that post ends with me saying:&lt;/p&gt;



 &lt;blockquote&gt;
 &lt;p&gt;Unfortunately, though, I donâ€™t think the benefits Iâ€™ve gotten in this one month of using NixOS so far justified the cost Iâ€™ve initially spent and continue to spend learning Nix and NixOS. &lt;br&gt;
&amp;mdash; &lt;br&gt;
Ultimately, whether the benefits of learning a particular technology outweigh the costs depends on how much you take full advantage of its features. So, I believe that if I experiment with more setups, try different programs, or start managing servers with Nix, I will begin to see a better return on this investment from what I have learned so far. :)&lt;/p&gt;

 &lt;/blockquote&gt;

&lt;p&gt;Well, it&amp;rsquo;s been about a year since I published that post. Since then, I&amp;rsquo;ve experimented with more setups, tried different programs, and started managing my own server with NixOS. And&amp;hellip; &lt;strong&gt;Contrary to my initial expectations that I would get a better return on investment from NixOS with more usage, the opposite happened.&lt;/strong&gt;&lt;/p&gt;
&lt;h1 id="the-pain-of-getting-things-to-work"&gt;The Pain of Getting Things to Work&lt;/h1&gt;
&lt;p&gt;So you want to try a new program/service? First, you try the NixOS module and see whether it works the way you want. Oh&amp;hellip; it doesn&amp;rsquo;t. Now, you have a few choices:&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;
&lt;p&gt;Try to figure out what&amp;rsquo;s wrong with your current configuration (maybe even read the source code of the NixOS module you&amp;rsquo;re using.)&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;Stick to more standard NixOS modules instead of using the one provided for the program you&amp;rsquo;re trying to install. For example, you might create your a systemd unit file and include the program binary using Nix.&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;Just use some containerization technology like Docker, or maybe a sandboxing solution like Flatpak (which is exactly what you can do on any typical FHS-based Linux distro.)&lt;/p&gt;
&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;Sometimes, you just can&amp;rsquo;t foresee whether the reason an app isn&amp;rsquo;t running the way you want is due to a problem or limitation in the NixOS module. And if you don&amp;rsquo;t put a time limit on how much you investigate it, you may lose a lot of time. The problem with the second option is that it&amp;rsquo;s not fun to go through that process every time you want to try a new application or service on your system. Especially if it&amp;rsquo;s just because you can&amp;rsquo;t install it the native way, or you just don&amp;rsquo;t like something about the native way. So you end up falling back to the third option, which is something you can just as easily do on any FHS-based distro anyway.&lt;/p&gt;
&lt;p&gt;You need to run a program like Electron in your Node project for your new job, and you try to install it through npm and then run it? Well, guess what. &lt;a href="https://www.rugu.dev/en/blog/nixos-precompiled/"&gt;NixOS hates pre-compiled programs&lt;/a&gt;, so you need to learn more about how to resolve this problem while using NixOS. So you&amp;rsquo;re kind of forced to learn about other specific Nix tools (&lt;code&gt;nix-ld&lt;/code&gt;, &lt;code&gt;buildFhsEnv&lt;/code&gt;, creating your derivations, etc.) if you need to use them regardless.&lt;/p&gt;
&lt;p&gt;In an FHS system, you&amp;rsquo;d configure a file and then run the program with that configuration. In NixOS (or home-manager), you now write a DSL based on Nix expressions, which then generates the actual configuration file the program will use. I think this just means another layer to trace when debugging. &lt;strong&gt;When you are using NixOS, and things work, everything works smoothly. It&amp;rsquo;s fine. But when things go wrong, you now have an additional layer to worry about.&lt;/strong&gt; Did you misconfigure something at the NixOS level, or did the config generate correctly but there&amp;rsquo;s an issue with the program itself? And so on&amp;hellip;&lt;/p&gt;
&lt;h1 id="problem-of-leaky-abstractions"&gt;Problem of (Leaky) Abstractions&lt;/h1&gt;
&lt;p&gt;I think one of the main issues here is that NixOS just adds an abstraction layer on top of a procedural system. &lt;strong&gt;You interact with it as if it were declarative, but it&amp;rsquo;s not. Under the hood, you&amp;rsquo;re still running programs that were designed for FHS environments, where programs share their libraries, bootstrap themselves, install other precompiled programs, and so on&amp;hellip; I believe that almost all my frustrations with NixOS is due to this phenomenon of abstractions.&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;As the &lt;a href="https://www.joelonsoftware.com/2002/11/11/the-law-of-leaky-abstractions/"&gt;Law of Leaky Abstractions&lt;/a&gt; suggests, &lt;em&gt;&amp;ldquo;All non-trivial abstractions, to some degree, are leaky.&amp;rdquo;&lt;/em&gt; And it turns out that NixOS is not immune to this phenomenon either.&lt;/p&gt;
&lt;p&gt;I would definitely prefer NixOS over an FHS-based Linux distro if it weren&amp;rsquo;t just a wrapper around Linux, but instead its own system with dedicated tooling and native programs. But I also understand how hard it is to build and sustain a community of people developing software specifically for a niche OS. So, it makes sense that NixOS is designed as a Linux distro. It&amp;rsquo;s similar to how Rich Hickey made Clojure run on the JVM and JavaScript runtimes to take advantage of their tooling and ecosystems, despite sharing very little with them in terms of philosophy.&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;But in the end, I feel like the discrepancy between the philosophy of NixOS and the programs and services running under the hood is so great that it is almost impossible to not feel this in some negative way, as a user.&lt;/strong&gt;&lt;/p&gt;
&lt;h1 id="the-time-cost"&gt;The Time Cost&lt;/h1&gt;
&lt;p&gt;Well, I like NixOS and Nix&amp;rsquo;s philosophy. That&amp;rsquo;s why I stuck with it for over a year and tried to learn as much as I could despite the frustrations. I also think NixOS delivers on most of its promises, so the issue for me isnâ€™t whether it works or not. Itâ€™s also not about whether you can make things work (you can). The problem is: at what cost? Tasks that would take very little time on a traditional FHS-based distro can take significantly longer on NixOS. And I really donâ€™t like that.&lt;/p&gt;
&lt;p&gt;I understand the benefits of reproducibility and so on, but when I think about how much I&amp;rsquo;ve gained from that reproducibility compared to my old dotfiles setup, I realize that I did NOT see any real benefits &lt;strong&gt;in practice&lt;/strong&gt;. I am just sure that configuring and making stuff run the Nix way just takes way more time than just using a regular FHS distro.&lt;/p&gt;
&lt;h1 id="back-to-arch-btw"&gt;Back to Arch, BTW&lt;/h1&gt;
&lt;p&gt;I still think that NixOS can be useful for some people who especially HEAVILY rely on syncing configurations across multiple devices and TRULY need system-level reproducibility. But Iâ€™m definitely not one of those people. I donâ€™t need reproducibility to the extent that NixOS provides, and &lt;strong&gt;I also realized that I&amp;rsquo;m way more comfortable getting things done in an impure system than dealing with the friction of a pure one that slows me down in almost in every change I do.&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;So now, I&amp;rsquo;m just back to using Arch Linux, btw.&lt;/p&gt;</description></item><item><title>Linux Asceticism</title><link>https://rugu.dev/en/blog/linux-asceticism/</link><pubDate>Sun, 10 Nov 2024 00:00:00 +0000</pubDate><guid>https://rugu.dev/en/blog/linux-asceticism/</guid><description>&lt;p&gt;Most well-known living philosophies -such as Cynicism, Epicureanism, Stoicism, Buddhism, and Sufism- advocate some form of &lt;a href="https://en.wikipedia.org/wiki/Asceticism"&gt;Asceticism&lt;/a&gt;. This could involve various acts such as fasting, deliberately confronting personal fears, or even something as subtle as choosing not to pour salt on food. But regardless of the specific way that these practices are pursued, the main goal remains the same: Strengthening your body and mind to make yourself indifferent to and indifferent from the things that are outside your control. That is to say, turn yourself into someone who can handle hardships with as few possessions as possible.&lt;/p&gt;
&lt;p&gt;When people argue for using Linux, they often focus on either political or practical reasons. For instance, they may choose Linux because it supports the principles of software freedom and personal control. They may also choose it for reasons such as cost savings, customizability, flexibility to meet specific needs, performance, tool availability, and so on.&lt;/p&gt;
&lt;p&gt;However, thereâ€™s another often-overlooked aspect that can make using a minimal Linux distribution worthwhile: &lt;strong&gt;using a minimal Linux distro on your personal computer is a form of &lt;a href="https://en.wikipedia.org/wiki/Asceticism#Etymology_and_meaning"&gt;Askesis&lt;/a&gt;&lt;/strong&gt; -disciplined practices done for self-improvement. At first, it will probably feel uncomfortable and overwhelming. Youâ€™ll face many problems that youâ€™ll need to solve. But youâ€™ll also come to realize and understand better that many of the features you take for granted in an OS with a preconfigured desktop environment are actually separate components that need to exist on your system for you to have that functionality.&lt;/p&gt;
&lt;p&gt;There will be times that you might need to understand what a network interface is, what a block device is, what mounting is, how keyboard mappings are handled differently on the virtual console or in a desktop environment/window manager, and so on. It will force you to learn more and more and youâ€™ll also begin to appreciate the underlying elements that are often hidden away by the layers we rely on. This effect will be amplified especially if you like to tinker and try to make things happen as you want them to be.&lt;/p&gt;
&lt;p&gt;In the end, you&amp;rsquo;ll gain a deeper understanding of what happens under the hood. Your comfort zone will broaden as you develop the mindset of solving problems. &lt;strong&gt;I know that this kind of reasoning is not as forceful as the pragmatic or ideological reasons for some people, but it still is a good bonus that further motivated me to learn more and more about Linux.&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;For the last few years, I&amp;rsquo;ve been mainly using Arch Linux as my choice of personal OS, and for the past few months, I&amp;rsquo;ve been using NixOS. Although I have not used/tried MacOS yet, I guess that if I tried it, most of the skills I acquired through using Linux would carry over to it and I would not have much problems getting adapted to it. However, Iâ€™m not so sure about the other way around, especially for those who switch from Windows to Linux.&lt;/p&gt;



 &lt;blockquote&gt;
 &lt;p&gt;If you&amp;rsquo;re going to fight in the rain, train in the storm.&lt;br&gt;
- Unknown&lt;/p&gt;

 &lt;/blockquote&gt;

&lt;p&gt;I think it&amp;rsquo;s good to have tools in our toolbox that let us work minimally, but I also think it does not make much sense to use them all the time if there are already other tools available to achieve things in an easier and faster way. &lt;strong&gt;So I am not against using non-minimal software by any means. They are fine as long as they don&amp;rsquo;t introduce more problems than they solve.&lt;/strong&gt;&lt;/p&gt;</description></item><item><title>Lessons from Plain Text</title><link>https://rugu.dev/en/blog/plain-text/</link><pubDate>Thu, 10 Oct 2024 00:00:00 +0000</pubDate><guid>https://rugu.dev/en/blog/plain-text/</guid><description>&lt;p&gt;When you interact with a text file using an editor, what you see doesn&amp;rsquo;t necessarily reflect the data stored in the file. Sure, the contents of plain text files are byte codes encoded in formats like ASCII, UTF8, or UTF16, and these byte codes are the ultimate source of truth. But in the end, it&amp;rsquo;s still your text editor that chooses how to interpret and represent that ultimate source of truth - binary codes into something recognizable to you. &lt;strong&gt;This means that two different files could look the same, or the same file might appear differently depending on the editor(s) you use.&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;Your text editor might highlight (or not) certain parts based on syntax it recognizes, it can control how tabs appear (2 spaces, 4 spaces, or even 8). It decides how to encode the tab key input, whether as &lt;code&gt;\t&lt;/code&gt; or as a set number of spaces. The same applies when you press the enter key to create a new line. Whether it gets encoded as &lt;code&gt;\n&lt;/code&gt; (UNIX) or &lt;code&gt;\r\n&lt;/code&gt; (Windows) depends on the editor&amp;rsquo;s configuration.&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;Your text editor hides details so you donâ€™t have to overthink. However, there are many times when these details leak through the protection layer that your text editor tries to provide. And you often don&amp;rsquo;t notice these complexities until you face them.&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;So, the main goal of this essay is to share some of my experiences and what I&amp;rsquo;ve learned over time about common problems you might encounter with plain text.&lt;/p&gt;
&lt;h2 id="tabs-vs-spaces"&gt;Tabs vs Spaces&lt;/h2&gt;
&lt;p&gt;Historically speaking, spaces existed long before tabs. The &lt;a href="https://en.wikipedia.org/wiki/Tab_key"&gt;reason&lt;/a&gt; why tabs were initially developed was to reduce the repetitive use of both the space bar and backspace key.&lt;/p&gt;
&lt;p&gt;However, people still debate using tabs or spaces in their projects. &lt;strong&gt;This isn&amp;rsquo;t about whether we should use the tab key itself, but rather whether text editors should insert spaces or tabs when we press it,&lt;/strong&gt; that is to say how to encode the blank spaces we see in our editor when we press tab key.&lt;/p&gt;
&lt;p&gt;I guess the main advantage of tabs over spaces is the flexibility it provides. When using tabs, you can collaborate with many different people who prefer to see different levels of indentation, without having to expose their preferences over others. (Sure, there is also the fact that tab character takes less space, but I don&amp;rsquo;t think this makes much of a difference, especially considering that we are in 2024.)&lt;/p&gt;
&lt;p&gt;One problem with tabs, though, is precise editing. Since tabs represent multiple spaces at once, aligning lines may not work as one expects from time to time.&lt;/p&gt;
&lt;p&gt;Like, what you perfectly see as OK in one editor where tabs are configured to take 4 columns, can be disgusting in another editor where tabs are configured to take 2 columns:&lt;/p&gt;
&lt;p&gt;Editor 1 with tabs configured to take 4 spaces:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-text-size-adjust:none;"&gt;&lt;code class="language-javascript" data-lang="javascript"&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#75715e"&gt;// 4 tabs, + 3 spaces
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#66d9ef"&gt;function&lt;/span&gt; &lt;span style="color:#a6e22e"&gt;calculate&lt;/span&gt;(&lt;span style="color:#a6e22e"&gt;a&lt;/span&gt;, &lt;span style="color:#a6e22e"&gt;b&lt;/span&gt;,
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#a6e22e"&gt;c&lt;/span&gt;, &lt;span style="color:#a6e22e"&gt;d&lt;/span&gt;) {
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#75715e"&gt;// Some logic
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;}&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Editor 2 with tabs configured to take 2 spaces:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-text-size-adjust:none;"&gt;&lt;code class="language-javascript" data-lang="javascript"&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#75715e"&gt;// 4 tabs, + 3 spaces
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#66d9ef"&gt;function&lt;/span&gt; &lt;span style="color:#a6e22e"&gt;calculate&lt;/span&gt;(&lt;span style="color:#a6e22e"&gt;a&lt;/span&gt;, &lt;span style="color:#a6e22e"&gt;b&lt;/span&gt;,
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#a6e22e"&gt;c&lt;/span&gt;, &lt;span style="color:#a6e22e"&gt;d&lt;/span&gt;) {
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#75715e"&gt;// Some logic
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;}
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;This is also partly the reason why I use spaces most of the time. If you still end up adjusting the tab width to match others&amp;rsquo; preferences, what&amp;rsquo;s the purpose of using tabs in the first place?&lt;/p&gt;
&lt;p&gt;I don&amp;rsquo;t know whether this is just due to &lt;a href="https://en.wikipedia.org/wiki/First-mover_advantage"&gt;first-mover advantage&lt;/a&gt; or not but it also looks like more projects use &lt;a href="https://insanelab.com/blog/notes/spaces-vs-tabs/"&gt;spaces over tabs&lt;/a&gt;. So what&amp;rsquo;s the point of going against the tide where there does not seem to be a very powerful advantage anyway?&lt;/p&gt;
&lt;p&gt;With all that said, I still believe that in many cases this conversation is somewhat overkill and often doesn&amp;rsquo;t make a significant practical difference. In the end, what truly matters is whether the codebase is consistent (either using tabs or spaces throughout). Aside from that, it shouldn&amp;rsquo;t matter much since these settings can be easily configured in many environments anyway.&lt;/p&gt;
&lt;h2 id="soft-wrapping-vs-hard-wrapping"&gt;Soft Wrapping vs Hard Wrapping&lt;/h2&gt;
&lt;p&gt;When using plain text, there will come a point when the text you write becomes too long. In many text editors (Notepad, Notepad++, Neovim, or even VSCode), the default behavior is for the text to continue growing horizontally until you press Enter to create a new line break. This can be somewhat unuser-friendly compared to most email or messaging clients, where the text automatically wraps, making it much easier to read.&lt;/p&gt;
&lt;p&gt;To be more clear, let me show you what non-wrapped and wrapped texts look like.&lt;/p&gt;
&lt;hr&gt;
&lt;p&gt;The text that is not wrapped:&lt;/p&gt;
&lt;pre tabindex="0"&gt;&lt;code&gt;Lorem ipsum dolor sit amet, consectetur adipiscing elit. Praesent fermentum felis nec elit bibendum, sit amet tempus sapien volutpat. Sed eu congue massa, non condimentum diam. Aenean vel consectetur odio. Suspendisse nec diam ac nisl bibendum tempor. Ut rutrum maximus velit, commodo consectetur nulla auctor ac. Curabitur neque dui, scelerisque in facilisis at, sagittis quis massa. Ut non tempor arcu. Vivamus elit massa, pulvinar vitae tellus ut, lobortis sagittis elit. Aenean vehicula varius eros, vitae pellentesque lorem consequat non. Aenean gravida velit id pellentesque tempor. Aenean ut purus nulla. Curabitur fringilla felis consequat ante condimentum porta. Curabitur id ex in libero rhoncus lobortis sit amet ac ligula.
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;The text that is wrapped:&lt;/p&gt;
&lt;pre tabindex="0"&gt;&lt;code&gt;Lorem ipsum dolor sit amet, consectetur adipiscing elit. Praesent fermentum
felis nec elit bibendum, sit amet tempus sapien volutpat. Sed eu congue massa,
non condimentum diam. Aenean vel consectetur odio. Suspendisse nec diam ac nisl
bibendum tempor. Ut rutrum maximus velit, commodo consectetur nulla auctor ac.
Curabitur neque dui, scelerisque in facilisis at, sagittis quis massa. Ut non
tempor arcu. Vivamus elit massa, pulvinar vitae tellus ut, lobortis sagittis
elit. Aenean vehicula varius eros, vitae pellentesque lorem consequat non.
Aenean gravida velit id pellentesque tempor. Aenean ut purus nulla. Curabitur
fringilla felis consequat ante condimentum porta. Curabitur id ex in libero
rhoncus lobortis sit amet ac ligula.
&lt;/code&gt;&lt;/pre&gt;&lt;hr&gt;
&lt;p&gt;As you can see, the wrapped text is a lot easier to read compared to the unwrapped one. This is why many people follow the practice of inserting newlines after a certain number of characters is reached (often around 78). In fact, in the text editor I use, Neovim, it is as simple as just pressing &lt;code&gt;gq&lt;/code&gt; for this line-wrapping procedure to happen for the current line you are in.&lt;/p&gt;
&lt;p&gt;This procedure of putting actual newlines between text so that it looks wrapped is known as hard-wrapping. This was what I did for a while as well, but since you are wrapping a line into multiple lines just because you can read it more easily in the text editor, you now have the following problems:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;It&amp;rsquo;s frustrating to constantly hard-wrap the text manually, even if you have a shortcut.&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;If you copy the wrapped text this way and paste it into another application, like your favorite messaging app, it will likely look unpleasant, especially on smaller devices like smartphones.&lt;/strong&gt; This happens because when the screen size is reduced, the messaging app will make sure each line is wrapped again if they don&amp;rsquo;t fit the vertical window size. I recommend reading &lt;a href="https://www.arp242.net/email-wrapping.html"&gt;The problems with hard wrapping email body text&lt;/a&gt; to understand this phenomenon a bit better.&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;Once you start adding actual newlines into your text just to make it more readable, you are sacrificing greppability.&lt;/strong&gt; You can think of the term &amp;ldquo;greppability&amp;rdquo; as a way to describe how well the text is suited for efficient searching through tools like grep. In the case of hard-wrapped text, if you search a sentence that is split across multiple lines, the search/find tools like grep might just fail since they usually operate on a line-by-line basis.
&lt;br&gt;
&lt;br&gt;
This idea of greppability is so important and time-saving especially when working on a code-base. For example, in general, it is not very optimal to split your error message or log messages into multiple lines as you lose greppability. See &lt;a href="https://morizbuesing.com/blog/greppability-code-metric/"&gt;Greppability is an underrated code metric&lt;/a&gt;, if you are further interested.&lt;/p&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;So, what&amp;rsquo;s the solution? &lt;strong&gt;Stop hard-wrapping and just use soft-wrapping&lt;/strong&gt;, many modern text editors already provide soft-wrapping solutions. This is what I have started to do recently. I am sure there are ways to achieve it in many modern editors. In Neovim it is as simple as to use the following commands:&lt;/p&gt;
&lt;pre tabindex="0"&gt;&lt;code&gt;:set linebreak
:set wrap
:set columns=80
&lt;/code&gt;&lt;/pre&gt;&lt;h2 id="newline"&gt;Newline&lt;/h2&gt;
&lt;p&gt;Let&amp;rsquo;s say that you are collaborating with other people through Git, and you just changed one line of code in a file and then pushed it to a branch. And suddenly, your colleagues started complaining about how your commit diff looks like you&amp;rsquo;ve changed the entire file.&lt;/p&gt;
&lt;p&gt;In this case, if you are not sure what&amp;rsquo;s going on, you might find yourself spending some time just to realize that it is your text editor that automatically converts all the line break characters to its format.&lt;/p&gt;
&lt;p&gt;I had a few friends who used VSCode as their main text editor and experienced the same issue. They were very confused the first time they encountered this kind of issue. Luckily, I was there to help them understand what was going on. :)&lt;/p&gt;
&lt;p&gt;Iâ€™m going to take a step back in time, but please bear with me for a bit.&lt;/p&gt;
&lt;p&gt;A long time ago, before monitors were common, people interacted with computers using these cool devices known as &lt;a href="https://en.wikipedia.org/wiki/Teleprinter"&gt;teleprinters&lt;/a&gt;. These were devices that combined a keyboard for input and a printer for output. You would type stuff, and when you send your command to the computer, you would get the results just like this:&lt;/p&gt;
&lt;div style="position: relative; padding-bottom: 56.25%; height: 0; overflow: hidden;"&gt;
 &lt;iframe allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share; fullscreen" loading="eager" referrerpolicy="strict-origin-when-cross-origin" src="https://www.youtube.com/embed/AwqryPuwl_w?autoplay=0&amp;amp;controls=1&amp;amp;end=0&amp;amp;loop=0&amp;amp;mute=0&amp;amp;start=0" style="position: absolute; top: 0; left: 0; width: 100%; height: 100%; border:0;" title="YouTube video"&gt;&lt;/iframe&gt;
 &lt;/div&gt;

&lt;p&gt;Now, in the context of a teleprinter, what &amp;ldquo;newline&amp;rdquo; meant was something like first physically moving the typewriter&amp;rsquo;s carriage back to the beginning of the line (CR: Carriage Return) and then moving the paper up by one line (LF: Line Feed)&lt;/p&gt;
&lt;p&gt;For these early machines designed to work with teletypes, both CR and LF were required to begin typing on a new line. And this influenced the early days of both Unix (1971) and MS-DOS (1981) as well. Back then, teletypes were still in use, so it kind of had to influence both operating systems in various ways. It turns out that, Unix developers chose to simplify the process of creating new lines by treating the LF character alone to signify the end of a line, while MS-DOS retained the full CR + LF combination. I guess the Microsoft guys were more concerned about legacy and hardware compatibility.&lt;/p&gt;
&lt;p&gt;And all these conventions continue to exist even today. Files created in Windows use &lt;code&gt;\r\n&lt;/code&gt; for newlines and those generated in UNIX-like systems (Linux/MacOS/BSD) use &lt;code&gt;\n&lt;/code&gt;. However, many modern text editors are capable of reading and parsing both formats across both operating systems anyway so we don&amp;rsquo;t even notice these small differences. Unless we mess up our git diffs :D&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;To avoid these situations, you can configure your text editor correctly, use a linter, and create a &lt;code&gt;.git/config&lt;/code&gt; file with &lt;code&gt;autocrlf&lt;/code&gt; set to your need.&lt;/strong&gt;&lt;/p&gt;
&lt;h1 id="conclude"&gt;Conclude&lt;/h1&gt;
&lt;p&gt;Even plain text might not always be as straightforward as it appears. Understanding whatâ€™s happening behind the scenes can be helpful, especially for those who work with it frequently.&lt;/p&gt;
&lt;p&gt;Also, if you have additional things to say about plain text, feel free to share them with me. I would really like to hear them.&lt;/p&gt;</description></item><item><title>Understanding Concurrency, Parallelism and JS</title><link>https://rugu.dev/en/blog/concurrency-and-parallelism/</link><pubDate>Sun, 08 Sep 2024 00:00:00 +0000</pubDate><guid>https://rugu.dev/en/blog/concurrency-and-parallelism/</guid><description>&lt;p&gt;Up until now, I was not aware that concurrency and parallelism were actually
different things since they are often used interchangeably by some. I just
learned that this is not the case while reading &lt;a href="https://www.braveclojure.com/concurrency/"&gt;Chapter
9&lt;/a&gt; of the book &amp;ldquo;Clojure for the
Brave and True.&amp;rdquo;&lt;/p&gt;
&lt;p&gt;This made me want to learn more about concepts related to concurrency and
parallelism, especially concerning the programming language I know best:
JavaScript. So this essay is basically a collection of notes I made during this
learning process.&lt;/p&gt;
&lt;h2 id="sequential-concurrent-and-parallel"&gt;Sequential, Concurrent and Parallel&lt;/h2&gt;
&lt;p&gt;When executing tasks in our lives, we execute them sequentially, concurrently,
or parallel. And this applies to computing as well.&lt;/p&gt;
&lt;p&gt;Sequential execution is basically when tasks are done one after another without
any overlap. For instance, if someone first looks at their phone, finishes
their job with it, and only after that switches to another task, for example, to
eat their soup, they are working sequentially. The problem with this approach
is sometimes your tasks are getting blocked, like for example when you ask a
thing to your friend from your phone, if you don&amp;rsquo;t switch to other tasks until
your friend answers, you will basically lose time. So different forms of
multitasking can be of help from time to time to save time. Concurrency and
parallelism are ways to achieve multitasking. But there are subtle, yet
important differences between the two.&lt;/p&gt;
&lt;p&gt;Concurrency is like handling numerous tasks by alternating between subtasks
(aka interleaving), while parallelism is like performing multiple tasks
simultaneously. For example, if someone looks at their phone, puts it down
to take a spoonful of soup, and then returns to their phone after setting down
the spoon, they are working concurrently. In contrast, if a person is texting
with one hand while eating with the other at the same time, they are working in
parallel. In both cases, they are multitasking, but there is a subtle
difference in how they multitask.&lt;/p&gt;
&lt;div style="text-align: center;"&gt;
&lt;img src="https://martin-thoma.com/images/2021/05/parallel-interleaved.png#75persize" alt=""&gt;
(Image taken from &lt;a href="https://martin-thoma.com/synchronous-asynchronous-concurrent-parallel/"&gt;Synchronous vs Asynchronous vs Concurrent vs Parallel&lt;/a&gt;)
&lt;/div&gt;

&lt;h2 id="threads"&gt;Threads&lt;/h2&gt;
&lt;p&gt;In the analogy above, I referred to eating soup and using the phone as
different tasks and each task consists of subtasks (for example eating soup,
you need to hold the spoon, then put it into your soup, then put that into your
mouth, and so on&amp;hellip;).&lt;/p&gt;
&lt;p&gt;Likewise, in the context of programming, the subtasks can be thought of as
individual segments of a larger set of instructions in a process. The
conventional way to operate on different subtasks simultaniously is to create
different kernel threads. Which are, kind of like separate workers each
handling their specific tasks while being able to work on the same set of
instructions as well as resources.&lt;/p&gt;
&lt;p&gt;Whether your threads run in parallel or concurrently actually depends on your
hardware. If your CPU has more cores than the number of threads running
simultaneously, each thread can be assigned to a different core, allowing them
to operate in parallel. However, if your CPU has fewer cores than the number of
threads, the operating system will start interleaving between the threads.&lt;/p&gt;
&lt;p&gt;When it comes to kernel threads, the developer&amp;rsquo;s experience remains the same,
whether the tasks are actually handled concurrently or parallelly does not make
much of a difference. The developer uses threads to improve performance and
avoid blocking. However, itâ€™s the operating system that makes the final
decision on how to handle these threads depending on the resources available.
As long as the developer uses threads, whether they run concurrently or in
parallel, it doesn&amp;rsquo;t matter; in both cases, the order in which instructions
from different threads are executed is kind of unpredictable. Therefore, the
developer should be cautious of potential issues (like race conditions,
deadlocks, livelocks, etc) that can occur from two different threads operating
on the same data anyway!&lt;/p&gt;
&lt;h2 id="spawning-processes-io-notifications"&gt;Spawning Processes, I/O Notifications&lt;/h2&gt;
&lt;p&gt;There are also other ways to achieve concurrency/parallelism other than using
threads, for example although not as efficient as threads, spawning multiple
processes is another way to go. Since the CPU runs different processes both
parallely and concurrently, you can multitask using many processes. The
disadvantages here are that each process comes with its own memory space
allocated and they don&amp;rsquo;t share their memory space by default like threads. So,
if you need different processes to operate in the same state, you might need
some sort of an IPC mechanism like shared memory segments, pipes, message
queues, or even databases.&lt;/p&gt;
&lt;p&gt;Kernels also implement their own way of I/O event notification mechanisms,
which again, can also be helpfull when building programs that you don&amp;rsquo;t want to
get blocked while doing certain tasks.&lt;/p&gt;
&lt;p&gt;I don&amp;rsquo;t want to delve into much details, since I don&amp;rsquo;t know much about it, but
the key idea is, kernel threads are not the only OS specific way that you can
achieve concurrency.&lt;/p&gt;
&lt;h2 id="nodejs-an-example-for-user-space-concurrency"&gt;NodeJS, an Example for User-space Concurrency&lt;/h2&gt;
&lt;p&gt;Programming languages often provide their own concurrency mechanisms to
simplify the complexities associated with using the Operating System&amp;rsquo;s API
(system calls). This means that the compiler or interpreter can translate your
high-level code into low-level system calls that the operating system
understand so that you don&amp;rsquo;t have to think much.&lt;/p&gt;
&lt;p&gt;Node.js is a great example of this concept. Although your JavaScript program
runs in a single-threaded environment with a sequential execution flow,
blocking tasks such as IO operations are delegated to the Node.js Worker
Threads. So NodeJS uses threads behind the scenes to manage those blocking
tasks, without revealing the complexities of managing them to the developer.&lt;/p&gt;
&lt;p&gt;Hereâ€™s how it works: Blocking operations, such as writing to a file or reading
from a file, or sending a network request are typically handled using the
built-in functions provided by Node.js. You usually pass callback functions as
parameters when calling these functions, so that Node.js Worker Threads can
execute the callback functions that you provided when they complete their
tasks.&lt;/p&gt;
&lt;div style="text-align: center;"&gt;
&lt;img src="https://miro.medium.com/v2/resize:fit:828/format:webp/1*U_zyHnKdlvjCdAQkoh0uuQ.png#75persize" alt=""&gt;
(Image taken from &lt;a href="https://medium.com/@abeythilakeudara3/nodejs-architecture-42a1d0efad8f"&gt;NodeJS Architecture&lt;/a&gt;)
&lt;/div&gt;

&lt;p&gt;Having a bit of more idea how NodeJS concurrency works under the hood, we can
now start practicing this theory by examining certain cases/situations.&lt;/p&gt;
&lt;p&gt;Consider the following code (thanks to my friend
&lt;a href="https://github.com/onsah"&gt;Onur&lt;/a&gt; for coming up with the example);&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-text-size-adjust:none;"&gt;&lt;code class="language-javascript" data-lang="javascript"&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#a6e22e"&gt;setTimeout&lt;/span&gt;(() =&amp;gt; {
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#66d9ef"&gt;while&lt;/span&gt; (&lt;span style="color:#66d9ef"&gt;true&lt;/span&gt;) {
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#a6e22e"&gt;console&lt;/span&gt;.&lt;span style="color:#a6e22e"&gt;log&lt;/span&gt;(&lt;span style="color:#e6db74"&gt;&amp;#34;a&amp;#34;&lt;/span&gt;);
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; }
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;}, &lt;span style="color:#ae81ff"&gt;1000&lt;/span&gt;);
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#a6e22e"&gt;setTimeout&lt;/span&gt;(() =&amp;gt; {
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#66d9ef"&gt;while&lt;/span&gt; (&lt;span style="color:#66d9ef"&gt;true&lt;/span&gt;) {
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#a6e22e"&gt;console&lt;/span&gt;.&lt;span style="color:#a6e22e"&gt;log&lt;/span&gt;(&lt;span style="color:#e6db74"&gt;&amp;#34;b&amp;#34;&lt;/span&gt;);
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; }
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;}, &lt;span style="color:#ae81ff"&gt;1000&lt;/span&gt;);
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;Here, if you run this program, the only thing you will encounter on your screen
will be &amp;ldquo;a&amp;quot;s. This is because the NodeJS interpreter continue executing the
current callback as long as there are instructions still available.&lt;/p&gt;
&lt;p&gt;As soon as all instructions in the main code are executed, the NodeJS runtime
environment then starts calling the callback functions. You can also think of
the main code you write as being called by default as a callback. In the
example above, the first &lt;code&gt;setTimeout&lt;/code&gt; is executed with the callback function
provided, and the second &lt;code&gt;setTimeout&lt;/code&gt; is executed with the callback function
provided. After 1 second passes, it starts spamming &amp;ldquo;a&amp;quot;s. You never see &amp;ldquo;b&amp;quot;s
because, once the first callback is called, it dominates the main thread with
its ugly while loop, forever! So, the second callback is never called.&lt;/p&gt;
&lt;p&gt;This has a few important effects. First, it reduces the chance of issues like
race conditions, though they can still happen, especially compared to
multi-threaded languages like C. Why? In C-like languages, the CPU interleaves
threads at the instruction level, while here, it mostly happens at the callback
level. As long as you avoid having complicated logic that relies on &lt;code&gt;async&lt;/code&gt;
functions with nested callbacks, it is certain that the flow of execution
remains uninterrupted, basically sequential.&lt;/p&gt;
&lt;p&gt;If the programming logic contains many &lt;code&gt;asynchronous callback-based functions&lt;/code&gt;
(like &lt;code&gt;fs.readFile()&lt;/code&gt;, &lt;code&gt;setTimeout()&lt;/code&gt;, &lt;code&gt;setImmediate()&lt;/code&gt;, or even
&lt;code&gt;Promise.then()&lt;/code&gt;), the race conditions can easily start to occur.&lt;/p&gt;
&lt;p&gt;This also applies to the usage of &lt;code&gt;await&lt;/code&gt; because you can think of &lt;code&gt;await&lt;/code&gt;
statements as shorthand for wrapping the remaining code in the current scope
into a callback function that runs once the awaited &lt;code&gt;Promise&lt;/code&gt; is resolved.&lt;/p&gt;
&lt;p&gt;Consider the &lt;code&gt;test&lt;/code&gt; and &lt;code&gt;test2&lt;/code&gt; functions provided below:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-text-size-adjust:none;"&gt;&lt;code class="language-javascript" data-lang="javascript"&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#66d9ef"&gt;const&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; {&lt;span style="color:#a6e22e"&gt;scheduler&lt;/span&gt;} &lt;span style="color:#f92672"&gt;=&lt;/span&gt; &lt;span style="color:#a6e22e"&gt;require&lt;/span&gt;(&lt;span style="color:#e6db74"&gt;&amp;#39;node:timers/promises&amp;#39;&lt;/span&gt;),
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#a6e22e"&gt;test&lt;/span&gt; &lt;span style="color:#f92672"&gt;=&lt;/span&gt; &lt;span style="color:#66d9ef"&gt;async&lt;/span&gt; () =&amp;gt; {
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#66d9ef"&gt;let&lt;/span&gt; &lt;span style="color:#a6e22e"&gt;x&lt;/span&gt; &lt;span style="color:#f92672"&gt;=&lt;/span&gt; &lt;span style="color:#ae81ff"&gt;0&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#66d9ef"&gt;const&lt;/span&gt; &lt;span style="color:#a6e22e"&gt;foo&lt;/span&gt; &lt;span style="color:#f92672"&gt;=&lt;/span&gt; &lt;span style="color:#66d9ef"&gt;async&lt;/span&gt; () =&amp;gt; {
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#66d9ef"&gt;let&lt;/span&gt; &lt;span style="color:#a6e22e"&gt;y&lt;/span&gt; &lt;span style="color:#f92672"&gt;=&lt;/span&gt; &lt;span style="color:#a6e22e"&gt;x&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#66d9ef"&gt;await&lt;/span&gt; &lt;span style="color:#a6e22e"&gt;scheduler&lt;/span&gt;.&lt;span style="color:#a6e22e"&gt;wait&lt;/span&gt;(&lt;span style="color:#ae81ff"&gt;100&lt;/span&gt;)
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#a6e22e"&gt;x&lt;/span&gt; &lt;span style="color:#f92672"&gt;=&lt;/span&gt; &lt;span style="color:#a6e22e"&gt;y&lt;/span&gt; &lt;span style="color:#f92672"&gt;+&lt;/span&gt; &lt;span style="color:#ae81ff"&gt;1&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; }
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#66d9ef"&gt;await&lt;/span&gt; Promise.&lt;span style="color:#a6e22e"&gt;all&lt;/span&gt;([&lt;span style="color:#a6e22e"&gt;foo&lt;/span&gt;(), &lt;span style="color:#a6e22e"&gt;foo&lt;/span&gt;(), &lt;span style="color:#a6e22e"&gt;foo&lt;/span&gt;()])
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#a6e22e"&gt;console&lt;/span&gt;.&lt;span style="color:#a6e22e"&gt;log&lt;/span&gt;(&lt;span style="color:#a6e22e"&gt;x&lt;/span&gt;) &lt;span style="color:#75715e"&gt;// Returns 1, not 3
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; },
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#a6e22e"&gt;test2&lt;/span&gt; &lt;span style="color:#f92672"&gt;=&lt;/span&gt; &lt;span style="color:#66d9ef"&gt;async&lt;/span&gt; () =&amp;gt; {
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#66d9ef"&gt;let&lt;/span&gt; &lt;span style="color:#a6e22e"&gt;x&lt;/span&gt; &lt;span style="color:#f92672"&gt;=&lt;/span&gt; &lt;span style="color:#ae81ff"&gt;0&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#66d9ef"&gt;const&lt;/span&gt; &lt;span style="color:#a6e22e"&gt;foo&lt;/span&gt; &lt;span style="color:#f92672"&gt;=&lt;/span&gt; &lt;span style="color:#66d9ef"&gt;async&lt;/span&gt; () =&amp;gt; {
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#66d9ef"&gt;await&lt;/span&gt; &lt;span style="color:#a6e22e"&gt;scheduler&lt;/span&gt;.&lt;span style="color:#a6e22e"&gt;wait&lt;/span&gt;(&lt;span style="color:#ae81ff"&gt;100&lt;/span&gt;)
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#66d9ef"&gt;let&lt;/span&gt; &lt;span style="color:#a6e22e"&gt;y&lt;/span&gt; &lt;span style="color:#f92672"&gt;=&lt;/span&gt; &lt;span style="color:#a6e22e"&gt;x&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#a6e22e"&gt;x&lt;/span&gt; &lt;span style="color:#f92672"&gt;=&lt;/span&gt; &lt;span style="color:#a6e22e"&gt;y&lt;/span&gt; &lt;span style="color:#f92672"&gt;+&lt;/span&gt; &lt;span style="color:#ae81ff"&gt;1&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; }
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#66d9ef"&gt;await&lt;/span&gt; Promise.&lt;span style="color:#a6e22e"&gt;all&lt;/span&gt;([&lt;span style="color:#a6e22e"&gt;foo&lt;/span&gt;(), &lt;span style="color:#a6e22e"&gt;foo&lt;/span&gt;(), &lt;span style="color:#a6e22e"&gt;foo&lt;/span&gt;()])
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#a6e22e"&gt;console&lt;/span&gt;.&lt;span style="color:#a6e22e"&gt;log&lt;/span&gt;(&lt;span style="color:#a6e22e"&gt;x&lt;/span&gt;) &lt;span style="color:#75715e"&gt;// Returns 3
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; },
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#a6e22e"&gt;main&lt;/span&gt; &lt;span style="color:#f92672"&gt;=&lt;/span&gt; () =&amp;gt; {
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#a6e22e"&gt;test&lt;/span&gt;()
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#a6e22e"&gt;test2&lt;/span&gt;()
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; }
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#a6e22e"&gt;main&lt;/span&gt;()
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;The reason &lt;code&gt;test()&lt;/code&gt; logs 1 is that when the foos functions are called, as soon
as they encounter &lt;code&gt;await scheduler.wait(100)&lt;/code&gt;, they essentially finish. Because
under the hood, using &lt;code&gt;await scheduler.wait(100)&lt;/code&gt; evaluates something like the
following:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-text-size-adjust:none;"&gt;&lt;code class="language-javascript" data-lang="javascript"&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#a6e22e"&gt;scheduler&lt;/span&gt;.&lt;span style="color:#a6e22e"&gt;wait&lt;/span&gt;(&lt;span style="color:#ae81ff"&gt;100&lt;/span&gt;).&lt;span style="color:#a6e22e"&gt;then&lt;/span&gt;(() =&amp;gt; {
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#a6e22e"&gt;x&lt;/span&gt; &lt;span style="color:#f92672"&gt;=&lt;/span&gt; &lt;span style="color:#a6e22e"&gt;y&lt;/span&gt; &lt;span style="color:#f92672"&gt;+&lt;/span&gt; &lt;span style="color:#ae81ff"&gt;1&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;})
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;So, the first &lt;code&gt;foo&lt;/code&gt; function finishes its job, it is now upto the callback
function to continue the business, but since it will only be called 100ms
after, the NodeJS interpreter does not stay idle but instead continues
executing the second and third foo functions by order. They also set &lt;code&gt;y&lt;/code&gt;
variable to the value of &lt;code&gt;x&lt;/code&gt; before the callback from the first foo is
triggered, and call &lt;code&gt;scheduler.wait&lt;/code&gt; with the callback function. As a result,
when the callbacks are eventually executed, they all update x using the
previous value of x, so we get 1, instead of 3.&lt;/p&gt;
&lt;p&gt;Why we get 3 logged out when running &lt;code&gt;test2()&lt;/code&gt;? Because the place where &lt;code&gt;await&lt;/code&gt;
is being run is different and it evaluates to something like&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-text-size-adjust:none;"&gt;&lt;code class="language-javascript" data-lang="javascript"&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#a6e22e"&gt;scheduler&lt;/span&gt;.&lt;span style="color:#a6e22e"&gt;wait&lt;/span&gt;(&lt;span style="color:#ae81ff"&gt;100&lt;/span&gt;).&lt;span style="color:#a6e22e"&gt;then&lt;/span&gt;(() =&amp;gt; {
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#66d9ef"&gt;let&lt;/span&gt; &lt;span style="color:#a6e22e"&gt;y&lt;/span&gt; &lt;span style="color:#f92672"&gt;=&lt;/span&gt; &lt;span style="color:#a6e22e"&gt;x&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#a6e22e"&gt;x&lt;/span&gt; &lt;span style="color:#f92672"&gt;=&lt;/span&gt; &lt;span style="color:#a6e22e"&gt;y&lt;/span&gt; &lt;span style="color:#f92672"&gt;+&lt;/span&gt; &lt;span style="color:#ae81ff"&gt;1&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;})
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;As soon as this callback function is called, nothing can interleave between&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-text-size-adjust:none;"&gt;&lt;code class="language-javascript" data-lang="javascript"&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#66d9ef"&gt;let&lt;/span&gt; &lt;span style="color:#a6e22e"&gt;y&lt;/span&gt; &lt;span style="color:#f92672"&gt;=&lt;/span&gt; &lt;span style="color:#a6e22e"&gt;x&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#a6e22e"&gt;x&lt;/span&gt; &lt;span style="color:#f92672"&gt;=&lt;/span&gt; &lt;span style="color:#a6e22e"&gt;y&lt;/span&gt; &lt;span style="color:#f92672"&gt;+&lt;/span&gt; &lt;span style="color:#ae81ff"&gt;1&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;So, no race condition can occur.&lt;/p&gt;
&lt;h2 id="to-conclude"&gt;To Conclude&lt;/h2&gt;
&lt;p&gt;The main idea here is that there is not just one way to achieve &amp;ldquo;concurrency&amp;rdquo;,
and the way you achieve it can also affect many things, like how performant
your programs will be or even what kind of problems you can encounter, or what
things to watch out for and so on.&lt;/p&gt;
&lt;p&gt;Just try to be mindful when working on programs that are supposed to work
concurrently/parallelly. Things can go wrong pretty fast.&lt;/p&gt;
&lt;h2 id="addendum"&gt;Addendum&lt;/h2&gt;
&lt;p&gt;&lt;strong&gt;2024-09-18&lt;/strong&gt;: This essay received a lot of attention that I did not
anticipate. It got 99 upvotes on HackerNews and appeared on the front page for
a while. A few days later, my friend Carlo informed me that my essay was
featured in the &lt;a href="https://bytes.dev/archives/323"&gt;323rd issue&lt;/a&gt; of the Bytes
newsletter, a JavaScript newsletter with over 200,000 subscribers.&lt;/p&gt;
&lt;p&gt;Iâ€™ve also received a few messages expressing appreciation for the essay and
even got the first &lt;a href="https://github.com/kugurerdem/rugudev/pull/1"&gt;pull request&lt;/a&gt;
to my blog&amp;rsquo;s GitHub repository. Thanks to everyone who took the time to read
and provide feedback.&lt;/p&gt;
&lt;p&gt;In the HackerNews discussion, @duped and @donatj recommended &lt;a href="https://www.youtube.com/watch?v=oV9rvDllKEg"&gt;Concurrency is
not Parallelism&lt;/a&gt; by Rob Pike. It
is a very good talk, so I wanted to mention it here as well for anyone else
further interested in the topic.&lt;/p&gt;</description></item><item><title>Switching from Arch to NixOS</title><link>https://rugu.dev/en/blog/nixos/</link><pubDate>Tue, 23 Jul 2024 00:00:00 +0000</pubDate><guid>https://rugu.dev/en/blog/nixos/</guid><description>&lt;p&gt;Iâ€™ve switched my desktop computer environment from Arch Linux to NixOS and used
it for about a month. I want to share my migration experience in case it might
interest or even help others.&lt;/p&gt;
&lt;p&gt;I also want to thank my friends &lt;a href="https://github.com/onsah"&gt;Onur&lt;/a&gt; and
&lt;a href="https://github.com/mk-nlp"&gt;Mert&lt;/a&gt; for encouraging me to switch to NixOS and
providing help.&lt;/p&gt;
&lt;h1 id="why-migrate-from-arch-in-the-first-place"&gt;Why Migrate from Arch in the first place?&lt;/h1&gt;
&lt;p&gt;As someone who likes playing with tools to understand how they work as well as
to match my preferences and ergonomic choices, I find myself frequently changing many
configurations on my system. However, it didn&amp;rsquo;t take long for me to realize
that I need a system to save and possibly automate these configuration
processes to save time in the future.&lt;/p&gt;
&lt;p&gt;A common solution is to create a git repository, often called &amp;ldquo;dotfiles,&amp;rdquo; where
you can store your configurations and changes. This approach helps you avoid
repeating the process of configuring the same stuff over and over when
switching to new host machines. You turn your home folder into a repository
itself by initializing git directly inside of it, set the remote address, and
pull the content. You can check out what my dotfiles looked like before
switching to NixOS &lt;a href="https://github.com/kugurerdem/legacy-dotfiles"&gt;here&lt;/a&gt;.&lt;/p&gt;
&lt;p&gt;Yet, even with this &amp;ldquo;dotfiles&amp;rdquo; approach there are some problems:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;It&amp;rsquo;s very easy to forget to add some configuration files from your computer
to the repo because, in a typical Linux setup, these files are often
scattered in different locations, and unstaged changes can be easily
overlooked. This is especially true for the home directory, where there are
many unstaged files by default, making it easier to miss the ones you want to
stage. I&amp;rsquo;ve had several instances where I realized I was missing some
configuration files from my old computer in the Git repo after formatting my
PC.&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;Your dotfiles are likely to become more complex over time, requiring you to
document how to configure certain aspects to avoid confusion the next time
you set up your environment.&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;Even if your dotfiles repo is perfect, there&amp;rsquo;s no guarantee your system will
work the same when you rebuild it. Changes might have occurred to some of the
packages that your dotfiles repo relies on. As a result, you might encounter
issues regarding package upgrades or even conflicts. This problem isn&amp;rsquo;t
specific to rebuilding systems from a dotfiles repo but also affects regular
users who just want to just update their systems.&lt;/p&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;In addition to these problems mentioned, although not very often, I would
encounter situations in Arch Linux where I had to look up an error message, a
specific bug, or a non-backward compatible update for some of the apps I use.
Why? Because a system update broke something! While this may not seem like a
big problem, it can be very inconvenient if you&amp;rsquo;re in a hurry to get a job
done. In these kind of situations, I often had to either fix the problem
immediately or ignore it for a while and fix it later. Rolling back to the
state of my computer before the system update and postponing the task of
addressing the issue introduced by the update was not an option.&lt;/p&gt;
&lt;p&gt;This was the moment when I remembered that the tools (Nix and NixOS) my friends
had been recommending could be useful to me.&lt;/p&gt;
&lt;h1 id="what-is-nixnixos"&gt;What is Nix/NixOS?&lt;/h1&gt;
&lt;p&gt;In essence, Nix is a package manager (there&amp;rsquo;s also a programming language
called Nix, which can sometimes be confusing). What sets Nix apart from its
alternatives is the way it manages packages and much more, including your home
folder. It is designed to provide reliable and reproducible package management
by isolating packages from each other in a smart way, preventing issues like
dependency conflicts. It also allows users to configure their computers using
its configuration files, through its programming language. So, you&amp;rsquo;re not
limited to downloading specific versions of packages with their dependencies,
but you can also configure other files on your computer, such as your dotfiles.&lt;/p&gt;
&lt;p&gt;NixOS, on the other hand, is a Linux distribution that uses Nix as its default
package manager. It integrates Nix&amp;rsquo;s features to manage the entire system at
both the system and user levels.&lt;/p&gt;
&lt;p&gt;To stay within the scope of this essay, which is to share my Nix and NixOS
experiences rather than explain their inner workings, I&amp;rsquo;ll stop here. However,
if you&amp;rsquo;re curious to learn more, I found &lt;a href="nix.dev"&gt;nix.dev&lt;/a&gt; and
&lt;a href="nixos.wiki"&gt;nixos.wiki&lt;/a&gt; particularly helpful for learning more about Nix and NixOS.&lt;/p&gt;
&lt;h1 id="the-learning-curve-and-initial-trial"&gt;The Learning Curve and Initial Trial&lt;/h1&gt;
&lt;p&gt;Since NixOS fundamentally provides a much different user experience than most
of the other Linux distributions. I thought it would be wiser to first try
NixOS in a VM instead of directly trying to figure out stuff after installing
the distro on my host machine.&lt;/p&gt;
&lt;p&gt;I can confidently say that during this period of testing NixOS on a VM, I had
more troubles related to &lt;code&gt;QEMU&lt;/code&gt; and network bridging than problems related to
understanding how Nix works. The same goes for the installation process as
well, for some reason &lt;code&gt;Ventoy&lt;/code&gt; did not work properly with the NixOS iso image
while formatting the disk with &lt;code&gt;dd&lt;/code&gt; just worked fine.&lt;/p&gt;
&lt;p&gt;My initial goal was to make the VM I was running function exactly like my host
machine. This way, once I got NixOS working as intended in the VM, I could
replicate the setup on my host machine. I just needed to copy the configuration
files from the VM to the host machine and run a few Nix and NixOS commands. And
this was exactly what happened when I switched to my host machine. Easy peasy.
:)&lt;/p&gt;
&lt;p&gt;In the end, it took me around 4-5 days, working 2-3 hours each day, to learn
Nix and NixOS and replicate about 95% of my Arch dotfiles in the VM. When I
installed NixOS on my host computer, I simply cloned my nix-config repo, ran a
few commands as described, and boom! Everything was set up. :) It was such a
nice experience.&lt;/p&gt;
&lt;h1 id="initial-impressions-and-experience"&gt;Initial Impressions and Experience&lt;/h1&gt;
&lt;p&gt;Here are my first impressions after using NixOS for about a month:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;At first, it feels like the knowledge you&amp;rsquo;ve gained from using conventional
FHS Linux distros becomes redundant, as you no longer configure programs by
directly modifying their configuration files in the file system. Instead, you
use the settings provided by NixOS and home-manager (a standardized Nix
program that allows users to manage and configure their home environments
through Nix files without root privileges).&lt;/p&gt;
&lt;p&gt;Because most configurations are done through the settings provided by the
packages, it initially seemed like this might prevent users from
understanding what&amp;rsquo;s happening under the hood.&lt;/p&gt;
&lt;p&gt;However, after using NixOS for a while, I realized this was not true. The
abstraction that NixOS packages provide doesn&amp;rsquo;t hide everything from the user
to avoid confusion with irrelevant details. Instead, it offers a way to
configure your environment the Nix way, so the resulting configuration files
are created by Nix.&lt;/p&gt;
&lt;p&gt;Most of the prior knowledge I had about configuring the programs I use was
easily transferable to the NixOS domain. Also, you don&amp;rsquo;t have to configure
every dotfile through Nix. In fact, home-manager allows you to source files
to desired destinations (see the home.file.*.source option for home-manager).&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;The documentation is not in great shape. The Nix wiki is certainly not as
good as the Arch wiki. Sometimes, it&amp;rsquo;s outdated, and other times, it&amp;rsquo;s not
detailed enough. This is why it&amp;rsquo;s very important to learn the Nix programming
language well so you can easily read the options available for a package you
want to install. Once you understand the fundamentals of the Nix programming
language, the code itself becomes the documentation.&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;It is very confusing to have many alternatives for certain tasks. For
example, there are two different ways to install home-manager (standalone
installation vs. system modules), and how you install it affects the way you
interact with it later. Another example is Nix flakes, which are meant to
replace channels (an imperative way of downloading packages) but are still
considered an experimental feature by NixOS.&lt;/p&gt;
&lt;p&gt;To be fair, having to choose between many options is already an issue in
Linux (though many see this as a feature), and NixOS seems to have the same
problem.&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;From my experience so far, most Nix packages are designed to allow
self-contained setups and installations, including plugins. Here are a few
examples:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;When installing Firefox or Chromium browser packages, you can set which
plugins you want to be installed by default.
&lt;a href="https://github.com/kugurerdem/dotfiles/blob/963f8a99545fa648e31edf085299fd96802e7d04/home-manager/home.nix#L137"&gt;Example&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;For my default password manager &lt;code&gt;pass&lt;/code&gt; (a standard UNIX password
manager), the plugins I wanted to integrate with pass can be defined
through a derivation attribute &lt;code&gt;withExtensions&lt;/code&gt;.
&lt;a href="https://github.com/kugurerdem/dotfiles/blob/963f8a99545fa648e31edf085299fd96802e7d04/home-manager/home.nix#L52"&gt;Example&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;When installing the Minecraft launcher prismlauncher, you can declare
which JDKs should be available and used by the launcher by simply
overriding one of the package attributes.
&lt;a href="https://github.com/kugurerdem/dotfiles/blob/963f8a99545fa648e31edf085299fd96802e7d04/home-manager/home.nix#L81"&gt;Example&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;For Neovim, you can declare which dependencies and plugins you want to
install out of the box using the &lt;code&gt;extraPackages&lt;/code&gt; and &lt;code&gt;plugins&lt;/code&gt; options of the
home-manager&amp;rsquo;s &lt;code&gt;programs.neovim&lt;/code&gt; option.&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;These are just a few examples, and I am sure this is a standard for many
other programs. I really like this. Dependencies used only
by certain programs are self-contained within the program that will use them.&lt;/p&gt;
&lt;p&gt;You can even override some of the derivation attributes for the package you
are installing so that it is not installed from the git source repository
defined in the nixpkgs repo, but from your own source repository. I used this
technique to install and set up my window manager dwm using my own git fork
of dwm.
&lt;a href="https://github.com/kugurerdem/dotfiles/blob/main/home-manager/dwm.nix#L4"&gt;Example&lt;/a&gt;&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;The configuration files and the nix-config repo I now have are much
more elegant and simpler than my previous dotfiles repo. It&amp;rsquo;s much easier to
organize configurations in a modular way now.&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;The rollback mechanisms that Nix provides (combined with the ease of using
other people&amp;rsquo;s configurations) make trying new things (like different window
managers, desktop environments, programs, or even other people&amp;rsquo;s setups) very
appealing.&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;In Arch, there were a few instances where I had to use additional package
managers like &lt;code&gt;yay&lt;/code&gt; to access the AUR (Arch User Repository) alongside the
official Arch repository. I also recall compiling and building some tools,
like &lt;code&gt;fzf&lt;/code&gt;, from scratch. I haven&amp;rsquo;t needed to do any of this while using
NixOS.&lt;/p&gt;
&lt;p&gt;Overall, I&amp;rsquo;ve had a better experience with the Nix package manager itself
compared to using pacman and the AUR.&lt;/p&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;h1 id="to-conclude"&gt;To Conclude&lt;/h1&gt;
&lt;p&gt;In the end, I really think Nix and NixOS are very strong tools for achieving
reliable and reproducible system configurations and package management.
Unfortunately, though, I don&amp;rsquo;t think the benefits I&amp;rsquo;ve gotten in this one month
of using NixOS so far justified the cost I&amp;rsquo;ve initially spent and continue to
spend learning Nix and NixOS.&lt;/p&gt;
&lt;p&gt;But since I currently have no workload and enjoy the learning process, I
don&amp;rsquo;t see a serious problem here.&lt;/p&gt;
&lt;p&gt;Ultimately, whether the benefits of learning a particular technology outweigh
the costs depends on how much you take full advantage of its features. So, I
believe that if I experiment with more setups, try different programs, or start
managing servers with Nix, I will begin to see a better return on this
investment from what I have learned so far. :)&lt;/p&gt;</description></item><item><title>Introducing: Mark Scroll Positions</title><link>https://rugu.dev/en/blog/mark-scroll-positions/</link><pubDate>Mon, 03 Jun 2024 00:00:00 +0000</pubDate><guid>https://rugu.dev/en/blog/mark-scroll-positions/</guid><description>&lt;p&gt;Try the extension in
&lt;a href="https://chromewebstore.google.com/detail/mark-scroll-positions/echejfhmdgnabmbihbmkdgeajmbojald"&gt;Chrome&lt;/a&gt;
or in
&lt;a href="https://addons.mozilla.org/en-US/firefox/addon/mark-scroll-positions/"&gt;Firefox&lt;/a&gt;
&lt;br&gt;
See the source code
&lt;a href="https://github.com/kugurerdem/mark-scroll-positions"&gt;kugurerdem/mark-scroll-positions&lt;/a&gt;&lt;/p&gt;
&lt;h2 id="hahahugoshortcode25s0hbhb"&gt;&lt;div style="position: relative; padding-bottom: 56.25%; height: 0; overflow: hidden;"&gt;
 &lt;iframe allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share; fullscreen" loading="eager" referrerpolicy="strict-origin-when-cross-origin" src="https://www.youtube.com/embed/BzbMsaQkt34?autoplay=0&amp;amp;controls=1&amp;amp;end=0&amp;amp;loop=0&amp;amp;mute=0&amp;amp;start=0" style="position: absolute; top: 0; left: 0; width: 100%; height: 100%; border:0;" title="YouTube video"&gt;&lt;/iframe&gt;
 &lt;/div&gt;
&lt;/h2&gt;
&lt;p&gt;I like reading blog posts a lot. While some of them are short and easy to read,
most of them are long and require more time to finish. When reading those long
essays, I take a break most of the time. Thus, when I re-open an essay, I
often lose the original place where I was reading. And if I
can remember where I was, then I manually scroll back there. This makes the
reading experience less smooth and more time-consuming.&lt;/p&gt;
&lt;h2 id="a-not-so-clever-workaround-fragmented-identifiers"&gt;A Not-So Clever Workaround (Fragmented Identifiers)&lt;/h2&gt;
&lt;p&gt;I have found a neat trick to work around this problem over time. I was already
using the bookmark feature of my Brave browser, but it was not tracking where I
left reading. So, I would proceed with the following procedure:&lt;/p&gt;
&lt;p&gt;(1) Open the inspect mode. &lt;br&gt;
(2) Click an element that has an ID nearest to where I am at, get the element
ID. &lt;br&gt;
(3) Append the element ID to the URL of the site in the form of a fragmented
identifier. &lt;br&gt;
(4) Using the new URL with fragmented ID, either overwrite the existing
bookmark or create a new one.&lt;/p&gt;
&lt;p&gt;If you don&amp;rsquo;t know what fragmented identifiers are, they are the part of the URL
that follows the hash symbol (#). Consider the following URL:&lt;/p&gt;
&lt;div style="text-align: center;"&gt;
&lt;a href="https://rugu.dev/en/blog/intentional-digital-consumption/#maintaining-balance"&gt;https://rugu.dev/en/blog/intentional-digital-consumption/#maintaining-balance&lt;/a&gt;
&lt;/div&gt;

&lt;p&gt;Here &lt;code&gt;#maintaining-balance&lt;/code&gt; is the fragmented identifier and thanks to it the
browser directly knows where to jump when it opens the page.&lt;/p&gt;
&lt;p&gt;Anyways, this approach works, but there are some problems with it. First of
all, it requires manual labor which could have been automatized, secondly,
although the fragmented links directly jump to the element with the id
specified in the URL, if there is no element with id close to where you are,
the method fails.&lt;/p&gt;
&lt;h2 id="seemingly-a-better-idea-storing-scroll-positions"&gt;Seemingly A Better Idea (Storing Scroll Positions)&lt;/h2&gt;
&lt;p&gt;So, I wanted a tool to save and jump to specific scroll positions on a webpage.&lt;/p&gt;
&lt;p&gt;I found some programs that are built for this purpose, but none of them met my
expectations.&lt;/p&gt;
&lt;p&gt;The most popular one I found was &lt;a href="https://chromewebstore.google.com/detail/scrroll-in/cjgjbjogfodppempgdlppgefojbcmjom"&gt;Scrroll
In&lt;/a&gt;,
and even that could be improved a lot: For example, it forces you to name each
saved scroll position with an alert prompt. Why not automatically give a random
name that can be renamed later? The fetch and save UI/UX is confusing. Why not
directly show the saved scrolls and allow users to jump to them? Additionally,
it lacks features like adding notes to scrolls and searching through saved
scrolls.&lt;/p&gt;
&lt;p&gt;So I decided to build my extension for storing/marking scroll positions on web
pages.&lt;/p&gt;
&lt;h2 id="introducing-mark-scroll-positions"&gt;Introducing: Mark Scroll Positions&lt;/h2&gt;
&lt;p&gt;Here is my extension built for that purpose, you can download it from
&lt;a href="https://chromewebstore.google.com/detail/mark-scroll-positions/echejfhmdgnabmbihbmkdgeajmbojald"&gt;here&lt;/a&gt;.&lt;/p&gt;
&lt;p&gt;You can save your scroll positions and resume reading later with ease. You can
save as many scroll positions as you want, add notes, rename them, and see and
manage all your saved spots on a separate page.&lt;/p&gt;
&lt;h3 id="implementation-details"&gt;Implementation Details&lt;/h3&gt;
&lt;p&gt;I think there are 3 important aspects for understanding how this project works
under the hood.&lt;/p&gt;
&lt;h4 id="1-interaction-between-the-popup-and-content-scripts"&gt;1) Interaction between the popup and content scripts&lt;/h4&gt;
&lt;p&gt;In modern browsers, the environment used by an extension&amp;rsquo;s popup is separate
from the environment of the current tab the user is viewing (i.e., the HTML,
CSS, and JavaScript files of the webpage).&lt;/p&gt;
&lt;p&gt;This separation isolates the extension from web content and prevents extensions
from directly accessing and modifying tab content. For this, extensions need
specific permissions like scripting and activeTab to interact between the
extension&amp;rsquo;s popup window and content scripts.&lt;/p&gt;
&lt;p&gt;In our case, when the user clicks the &amp;ldquo;Mark&amp;rdquo; button in the popup window, we
want to fetch the scroll position information from the active tab. However,
this can only be done in the content script environment. In such scenarios, you
can either create a content script that listens for events from the popup
(using &lt;code&gt;chrome.runtime.onMessage&lt;/code&gt; and &lt;code&gt;chrome.runtime.sendMessage&lt;/code&gt;) or inject
content scripts into the page environment (using
&lt;code&gt;chrome.scripting.executeScript&lt;/code&gt;) when the user clicks the &amp;ldquo;Mark&amp;rdquo; button. I
chose the second approach as it seemed cleaner. The same applies to the &amp;ldquo;Jump&amp;rdquo;
utility.&lt;/p&gt;
&lt;p&gt;This is basically to isolate the extension&amp;rsquo;s environment from the web content
so that extensions cannot directly access and modify tab content. As a
result of this, extensions need specific permissions such as &lt;code&gt;scripting&lt;/code&gt; and
&lt;code&gt;activeTab&lt;/code&gt; permissions to make an interaction between the extension&amp;rsquo;s
popup window and the content scripts.&lt;/p&gt;
&lt;h4 id="2-the-data-structure-to-be-saved"&gt;2) The data structure to be saved&lt;/h4&gt;
&lt;p&gt;If you want your application to be persistent and remember what the user has
done, you need to store data in a persistent form.&lt;/p&gt;
&lt;p&gt;I chose to store the details like this:&lt;/p&gt;
&lt;pre tabindex="0"&gt;&lt;code&gt;{
 [absoluteURL]: {
 scrolls,
 title,
 }
}
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;So, the data is stored in &lt;code&gt;chrome.storage.local&lt;/code&gt; consists of keys of absolute
URLs and values of data related to that page.&lt;/p&gt;
&lt;p&gt;Each time a new scroll position is saved, the scrolls array is fetched and the
new scroll details are added to it. The same approach is used for deletion and
updates.&lt;/p&gt;
&lt;h4 id="3-deciding-on-how-to-implement-the-jump-functionality"&gt;3) Deciding on how to implement the jump functionality.&lt;/h4&gt;
&lt;p&gt;Deciding how to implement the jump functionality was challenging. I could have
simply saved the &lt;code&gt;window.pageYOffset&lt;/code&gt; value when the user clicks &amp;ldquo;Mark&amp;rdquo; and
uses that value with &lt;code&gt;window.scrollTo(0, offset)&lt;/code&gt; when the user clicks &amp;ldquo;Jump&amp;rdquo;
(like &lt;a href="https://chromewebstore.google.com/detail/scrroll-in/cjgjbjogfodppempgdlppgefojbcmjom"&gt;Scrroll
In&lt;/a&gt;
does). However, this would fail if the user resized the page or if the author
changed font sizes. So, I decided to save enough information to recalculate the
target offset based on a percentage.&lt;/p&gt;
&lt;p&gt;When the user clicks &amp;ldquo;Mark,&amp;rdquo; I save not only &lt;code&gt;window.pageYOffset&lt;/code&gt; but also
&lt;code&gt;window.innerHeight&lt;/code&gt; and &lt;code&gt;document.body.scrollHeight&lt;/code&gt;. Since
&lt;code&gt;window.pageYOffset + window.innerHeight&lt;/code&gt; roughly equals
&lt;code&gt;document.body.scrollHeight&lt;/code&gt; when the user scrolls to the bottom of the page,
we can adapt to page resizes with a normalization procedure when the user
clicks &amp;ldquo;Jump.&amp;rdquo;&lt;/p&gt;
&lt;p&gt;Is it that easy? Unfortunately, no. This method fails when the page gets longer
due to dynamic content updates (like new comments). In this case,
&lt;code&gt;document.body.scrollHeight&lt;/code&gt; gets bigger, but the offset where the user left
off and should continue to read on doesn&amp;rsquo;t actually change. Here, jumping
directly to the offset works better. You can still adjust the offset value in
comparison to &lt;code&gt;window.innerHeight&lt;/code&gt;, also known as the viewport.&lt;/p&gt;
&lt;p&gt;Currently, my extension uses the first method, but I might add a feature
allowing users to choose which jump method they prefer for certain pages.&lt;/p&gt;
&lt;h2 id="an-alternative-idea-storing-uniquely-identifiable-text"&gt;An Alternative Idea (Storing Uniquely Identifiable Text)&lt;/h2&gt;
&lt;p&gt;Another option is to mark pages based on uniquely identifiable text so the user
can jump to specific text. The problem with this is if the author changes the
page or content. Even changing one word can break the mark. In contrast, if you
save scroll positions, you will still land somewhere close to the initial text.&lt;/p&gt;
&lt;h2 id="last-thoughts"&gt;Last Thoughts&lt;/h2&gt;
&lt;p&gt;I believe all these ideas can be improved to create a better marking
application. Maybe a combination of these methods could work, or there might be
even simpler concepts that I have missed.&lt;/p&gt;
&lt;p&gt;The main problem is that pages can change, and it&amp;rsquo;s unclear how our application
should adapt to these changes.&lt;/p&gt;
&lt;p&gt;Anyway, I hope this application will be useful to some people. It will at least
be useful to me. If you want to contribute, please feel free to send your PRs
to
&lt;a href="https://github.com/kugurerdem/mark-scroll-positions"&gt;kugurerdem/mark-scroll-positions&lt;/a&gt;&lt;/p&gt;</description></item><item><title>Debloating My Android Phone with ADB</title><link>https://rugu.dev/en/blog/debloat-with-adb/</link><pubDate>Tue, 16 Jan 2024 00:00:00 +0000</pubDate><guid>https://rugu.dev/en/blog/debloat-with-adb/</guid><description>&lt;p&gt;My mother recently mentioned that her phone is continually opening certain
windows and prompting her to use services she doesnâ€™t need. After checking her
phone and doing some online research, I found out that many others have also
complained about this issue.&lt;/p&gt;
&lt;p&gt;Apparently, she was referring to pop-ups triggered by a pre-built program
called &amp;ldquo;SIM Menu&amp;rdquo;. This program basically allows operators to send
notifications and even generate pop-ups on your phone. And the frustrating part
is that most of these pop-ups seem to promote irrelevant services. If you
accidentally click &amp;ldquo;OK&amp;rdquo; when one of these pop-ups appears, you get charged by
your provider. It is a carefully set up trap designed to make you accidentally
subscribe to their unnecessary services and pay money.&lt;/p&gt;
&lt;p&gt;Since I prefer simplicity and like to have control over the tools I use. I was
already thinking about removing the bloatware on my phone that came
pre-installed and can&amp;rsquo;t be deleted through the interface. Hell, even some of
the fundamental apps, like a gallery or file manager, are filled with ads. It
gets on my nerves. So, I was already planning to learn how to remove these
bloatware and the situation I described earlier was the final straw for me.&lt;/p&gt;
&lt;p&gt;I&amp;rsquo;ve searched for tools to debloat Android phones and found &lt;code&gt;adb&lt;/code&gt;, Android
Developer Bridge. It&amp;rsquo;s basically a program which allows you to directly create
a shell session for your phone, similar to connecting to a remote server via
SSH (the only difference is that instead of connecting through the internet,
the connection is made via USB).&lt;/p&gt;
&lt;p&gt;Since Android is essentially an OS based on the Linux Kernel, the shell you
connect to will most likely be a variant of the sh dialect. So, for those who
are familiar with working in UNIX environments, its very convenient to remove
or install packages and customize your phone this way.&lt;/p&gt;
&lt;p&gt;In this essay, I document this process of removing bloatware from my phone
as a reference for future use. Hopefully, you find it helpful as well.&lt;/p&gt;
&lt;h1 id="enabling-usb-debugging-mode"&gt;Enabling USB Debugging Mode&lt;/h1&gt;
&lt;p&gt;While it is possible to establish an ADB connection to your phone over Wi-Fi, I
chose to use ADB through a USB connection as using Wi-Fi involves certain
security risks. For instance, others on your Wi-Fi network could potentially
connect to your phone, especially if your phone doesn&amp;rsquo;t have proper security
settings. Not to mention that you would need to set up your phone using ADB
through a USB connection first before initiating a Wi-Fi connection anyways.
Which kind of makes using WiFi seem more pointless as the reasons for
preferring Wi-Fi over USB are usually just convenience or not having a USB
cable available.&lt;/p&gt;
&lt;p&gt;To connect your phone using adb via a USB connection, you need to enable USB
Debugging mode on your phone. I won&amp;rsquo;t go into the specifics of this process as
it varies by phone. But for my own phone, I simply navigated to the &amp;ldquo;About&amp;rdquo;
section and tapped &amp;ldquo;MIUI Version&amp;rdquo; multiple times to switch into Developer Mode.
Then, I searched for the &amp;ldquo;USB Debugging&amp;rdquo; option and enabled it.&lt;/p&gt;
&lt;h1 id="connecting-to-your-phone-via-a-shell-session"&gt;Connecting to your phone via a Shell Session&lt;/h1&gt;
&lt;p&gt;Once you&amp;rsquo;ve installed &lt;code&gt;adb&lt;/code&gt;, you can view the manual by typing &lt;code&gt;adb help&lt;/code&gt;. You
can also refer to the &lt;a href="https://android.googlesource.com/platform/packages/modules/adb/&amp;#43;/refs/heads/master/docs/user/adb.1.md"&gt;online
documentation&lt;/a&gt;.&lt;/p&gt;
&lt;p&gt;To connect to your phone via a shell session, simply type &lt;code&gt;adb shell&lt;/code&gt; and
you&amp;rsquo;re good to go. Most standard UNIX commands such as &lt;code&gt;ls&lt;/code&gt;, &lt;code&gt;cat&lt;/code&gt;, &lt;code&gt;echo&lt;/code&gt;,
&lt;code&gt;grep&lt;/code&gt;, and more can be used.&lt;/p&gt;
&lt;p&gt;Keep in mind that you don&amp;rsquo;t need to enter a shell session just to run specific
commands. You can also use the &lt;code&gt;adb shell &amp;lt;cmd&amp;gt;&lt;/code&gt; pattern to run your particular
command &lt;code&gt;&amp;lt;cmd&amp;gt;&lt;/code&gt;. This approach simply creates a shell session, executes your
command, and closes the session, while forwarding the stdout to your current
shell session.&lt;/p&gt;
&lt;h1 id="uninstalling-bloatware"&gt;Uninstalling Bloatware&lt;/h1&gt;
&lt;p&gt;The Command Line Interface (CLI) tool used in Android for interaction with the
Android Package Manager is &lt;code&gt;pm&lt;/code&gt;. This tool basically allows you to list,
install, or uninstall software packages.&lt;/p&gt;
&lt;p&gt;To list the currently installed packages, execute the following command:&lt;/p&gt;
&lt;pre tabindex="0"&gt;&lt;code&gt;pm list packages
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;To view only the default apps on Android, enter this command:&lt;/p&gt;
&lt;pre tabindex="0"&gt;&lt;code&gt;pm list packages | grep &amp;#39;android&amp;#39;
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;At this point, I would advice you to search for other unwanted pre-installed
apps known to come with your phone&amp;rsquo;s brand as well as android packages which
are known to be bloatware. Take a list of these apps for future reference so
you can easily repeat this process if you need it later again.&lt;/p&gt;
&lt;p&gt;To delete a specific app from your phone, you first need to identify its
package name. You can accomplish this by searching for it on the internet.
However if you can&amp;rsquo;t still find it, you should be able to locate the app&amp;rsquo;s &amp;ldquo;apk
package code&amp;rdquo; directly on your phone. This process can vary depending on the
phone you&amp;rsquo;re using, so I suggest you look up how to find package codes for
applications on your specific phone model.&lt;/p&gt;
&lt;p&gt;Also, be careful to not to delete anything critical for your system to work. Do
not delete a package if you are not sure that it is not something system
critical.&lt;/p&gt;
&lt;p&gt;Once you get the package.name, you can just run the following command in the
adb shell:&lt;/p&gt;
&lt;pre tabindex="0"&gt;&lt;code&gt;pm uninstall --user 0 package.name
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;Here, &lt;code&gt;--user 0&lt;/code&gt; specifies the user for which you want to uninstall the
package. User 0 is typically the device&amp;rsquo;s default or primary user. When I have
run the command &lt;code&gt;pm uninstall&lt;/code&gt; without this, it would say package is
successfully deleted but the package would still remain on my phone.&lt;/p&gt;
&lt;p&gt;Keep in mind that we could have also used the following command:&lt;/p&gt;
&lt;pre tabindex="0"&gt;&lt;code&gt;adb shell pm uninstall --user 0 package.name
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;Or even:&lt;/p&gt;
&lt;pre tabindex="0"&gt;&lt;code&gt;adb uninstall --user 0 package.name
&lt;/code&gt;&lt;/pre&gt;&lt;h1 id="automating-the-process"&gt;Automating the Process&lt;/h1&gt;
&lt;p&gt;Remember that I told you to make a list of the packages you remove. This was
for to make the debloating process easier if you need to do it a second
time on your phone.&lt;/p&gt;
&lt;p&gt;I use a specific &lt;a href="https://github.com/kugurerdem/android-bloatwares"&gt;git
repository&lt;/a&gt; for this purpose.
In this repository, I have a file named &lt;code&gt;bloatwares.txt&lt;/code&gt; that contains the
package names of certain prebuilt applications for Mi, Xiaomi, Android, and
third-party applications.&lt;/p&gt;
&lt;p&gt;If I ever need to debloat my phone, or anyone else&amp;rsquo;s, all I need to do is to
run the following command:&lt;/p&gt;
&lt;pre tabindex="0"&gt;&lt;code&gt;cat bloatwares.txt | xargs adb shell pm uninstall -k --user 0
&lt;/code&gt;&lt;/pre&gt;&lt;h1 id="conclusion"&gt;Conclusion&lt;/h1&gt;
&lt;p&gt;If you haven&amp;rsquo;t already started, I strongly encourage you to consider debloating
your phone. Install &lt;code&gt;adb&lt;/code&gt; on your computer, connect to your phone using it,
identify packages that seem unnecessary, and free your device from the unwanted
&amp;lsquo;guests.&amp;rsquo;&lt;/p&gt;
&lt;p&gt;Go ahead and take back at least a partial ownership of your phone by getting
rid of these intruders!&lt;/p&gt;</description></item><item><title>Understanding Keyboard Events Better</title><link>https://rugu.dev/en/blog/understanding-keyboard-events/</link><pubDate>Sat, 02 Dec 2023 00:00:00 +0000</pubDate><guid>https://rugu.dev/en/blog/understanding-keyboard-events/</guid><description>&lt;p&gt;In this essay, I describe how I made a Node.js module to listen to keypresses
across the system on Linux machines using X. This experience helped me grasp
how the OS and Window Managers handle keyboard inputs, clarifying the reasons
behind an unexpected behavior I had encountered before, which I also mention in
the essay.&lt;/p&gt;
&lt;p&gt;If you&amp;rsquo;re interested in learning more about how keyboard events are handled,
this essay might be of interest to you.&lt;/p&gt;
&lt;h2 id="an-issue-about-remapping-keys"&gt;An Issue About Remapping Keys&lt;/h2&gt;
&lt;p&gt;As a person who uses VIM for many things I do, seamlessly transitioning between
VIM modes is essential for my workflow. However, the default key for returning
back to normal VIM mode is the Escape key, necessitating me to remove my hands
from the keyboard in order to reach it.&lt;/p&gt;
&lt;p&gt;This is exactly why many VIM users, including myself, remap the Escape key to
the Caps Lock key. This adjustment is particularly beneficial for those who are
already accustomed to pressing the Shift key for uppercase characters.&lt;/p&gt;
&lt;p&gt;However, I&amp;rsquo;ve encountered a minor issue with this setting: Certain applications
seem indifferent to the remappings I&amp;rsquo;ve configured. Occasionally, when I press
the Caps Lock key, the operating system interprets it as an Escape key press,
while the specific program I&amp;rsquo;m using still recognizes it as the original
physical key pressed.&lt;/p&gt;
&lt;p&gt;I have encountered this problem both in my Linux computer, and Windows
computer. So the problem itself is OS-agnostic. However I&amp;rsquo;ve unintentionally
identified the reason behind this occasional discrepancy while I was working on
a recreational project.&lt;/p&gt;
&lt;h2 id="linux-and-keyboard-events"&gt;Linux and Keyboard Events&lt;/h2&gt;
&lt;p&gt;Recently, a friend asked me if it&amp;rsquo;s possible to create macros using Node.js. I
confidently said, &amp;lsquo;Sure, it&amp;rsquo;s probably easy.&amp;rsquo; After a quick search, I found a
desktop automation library called robotJS and wrote a simple script where
specific keys are pressed regularly by the script.&lt;/p&gt;
&lt;p&gt;However, I started wondering if it was possible to trigger those keypresses
after a user presses a certain key. To achieve this, I needed to listen to
keypress events on a system-wide level. I searched for suitable Node.js
libraries for this task on Linux, but I couldn&amp;rsquo;t find one that worked
seamlessly.&lt;/p&gt;
&lt;p&gt;There were libraries like &lt;code&gt;iohook&lt;/code&gt;, but they seemed to lack support for
listening to Linux keyboard events in the latest versions of Node.js. Some
solutions only focused on capturing keyboard events within the current window
associated with the process.&lt;/p&gt;
&lt;p&gt;I stumbled upon a library called &lt;code&gt;xev-emitter&lt;/code&gt; but it didn&amp;rsquo;t provide what I
needed as it mainly dealt with listening to xevents of a specific X windows.&lt;/p&gt;
&lt;p&gt;After some contemplation, I decided to create my own Node.js module using
&lt;code&gt;xinput&lt;/code&gt; underneath, just for the sake of it and out of curiosity. &lt;code&gt;xinput&lt;/code&gt;
is a Linux tool that allows listening to keyboard events and provides an
interface to monitor events from connected keyboards.&lt;/p&gt;
&lt;p&gt;For instance, running the command &lt;code&gt;xinput&lt;/code&gt; gives me a list of available input
devices connected to my PC:&lt;/p&gt;
&lt;pre tabindex="0"&gt;&lt;code&gt;âŽ¡ Virtual core pointer 	id=2	[master pointer (3)]
âŽœ â†³ Virtual core XTEST pointer 	id=4	[slave pointer (2)]
âŽœ â†³ 2.4G Mouse 	id=10	[slave pointer (2)]
âŽœ â†³ 2.4G Mouse Consumer Control 	id=11	[slave pointer (2)]
âŽœ â†³ Synaptics TM3336-004 	id=14	[slave pointer (2)]
âŽ£ Virtual core keyboard 	id=3	[master keyboard (2)]
 â†³ Virtual core XTEST keyboard 	id=5	[slave keyboard (3)]
 â†³ Power Button 	id=6	[slave keyboard (3)]
 â†³ Video Bus 	id=7	[slave keyboard (3)]
 â†³ Power Button 	id=8	[slave keyboard (3)]
 â†³ 2.4G Mouse 	id=9	[slave keyboard (3)]
 â†³ 2.4G Mouse System Control 	id=12	[slave keyboard (3)]
 â†³ Ideapad extra buttons 	id=13	[slave keyboard (3)]
 â†³ AT Translated Set 2 keyboard 	id=15	[slave keyboard (3)]
 â†³ 2.4G Mouse Consumer Control 	id=16	[slave keyboard (3)]
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;&lt;code&gt;xinput&lt;/code&gt; also has a command type that lets you listen to a specific input
device. For instance, if I use &lt;code&gt;xinput test 15&lt;/code&gt;, it listens to the device with
the specified ID 15. When I run the command &lt;code&gt;xinput test 15&lt;/code&gt; and then press the
&amp;lsquo;a,&amp;rsquo; &amp;rsquo;s,&amp;rsquo; and &amp;rsquo;d&amp;rsquo; keys on my keyboard, the output I get is as follows:&lt;/p&gt;
&lt;pre tabindex="0"&gt;&lt;code&gt;key press 38
key release 38
key press 39
key release 39
key press 40
key release 40
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;Now, with these two commands, we can iterate through all the input devices
related to keyboards and listen to them. We can create a script that first
lists the available input devices, filters them, and then runs the command
&lt;code&gt;xinput test&lt;/code&gt; for each of them.&lt;/p&gt;
&lt;p&gt;However, there is still a minor problem. How do we understand which key is
pressed just by looking at the numbers that xinput gave us? How can we know
that 38 stands for the key &amp;lsquo;a&amp;rsquo;?&lt;/p&gt;
&lt;p&gt;The numbers provided by xinput are known as X Key Codes. These codes represent
the physical keys pressed on the X layer. They are essentially similar to Linux
Input Event Codes, which the Linux Operating System generates to represent the
physical keys pressed. For reasons I&amp;rsquo;m not aware of, &lt;a href="https://wiki.archlinux.org/title/Keyboard_input#Identifying_keycodes_in_console"&gt;X Key Codes are
incremented by 8 compared to Linux
keycodes&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;Now, the challenge lies in making sense of each X Key Code. We need a mapping
between the X Key Codes and their corresponding keys. However, what they
correspond to can be configured by users. In fact, I&amp;rsquo;ve configured this using
the command &lt;code&gt;setxkbmap -option &amp;quot;caps:swapescape&amp;quot;&lt;/code&gt;. So, although pressing the
same keys on a physical keyboard will result in the same key codes, the
interpretation by your operating system or window management server can be
configured. Therefore, the correspondence of each keycode with what you&amp;rsquo;ve
pressed might vary from one environment to another. In the X protocol, you can
view the mapping between X Key Codes and X KeySyms by running the command
&lt;code&gt;xmodmap -pke&lt;/code&gt;.&lt;/p&gt;
&lt;p&gt;This is essentially what I did in the Node.js module I created to listen to
keyboard events using X:&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;
&lt;p&gt;Obtain the list of available input devices by running &lt;code&gt;xinput&lt;/code&gt; as a
subprocess.&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;Filter the devices; you don&amp;rsquo;t need all of them, just their IDs.&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;For each ID, run the command &lt;code&gt;xinput test id&lt;/code&gt;.&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;Use the result of &lt;code&gt;xmodmap -pke&lt;/code&gt; to understand the semantic meaning assigned
to each physical keypress, known as a KeySym.&lt;/p&gt;
&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;If you&amp;rsquo;re curious, you can check out the module I created,
&lt;a href="https://github.com/kugurerdem/node-xinput-events"&gt;Node XInput Events&lt;/a&gt;.&lt;/p&gt;
&lt;h2 id="probably-a-better-approach"&gt;Probably a Better Approach&lt;/h2&gt;
&lt;p&gt;After implementing the module mentioned earlier, I discovered the existence of
a Linux utility called showkey that allows listening to pressed keys.&lt;/p&gt;
&lt;p&gt;It&amp;rsquo;s also possible to create a similar script using showkey under the hood. In
fact, this might have been a better approach compared to what I did above
because it operates on a more fundamental level than X.&lt;/p&gt;
&lt;p&gt;Similar to how we mapped between X Key Codes and their corresponding X Key
Codes, we could create a mapping between Linux Event Codes and their meanings
by examining the &lt;a href="https://github.com/torvalds/linux/blob/master/include/uapi/linux/input-event-codes.h"&gt;Linux source code for the input event
codes&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;Moreover, using scripts like xinput as subprocesses under our script might not
be the optimal approach for implementing an EventEmitter library to listen to
system-wide keypresses. The conventional way is likely to interact with the X
server using an X library. Unfortunately, I couldn&amp;rsquo;t build the nodeJS x11
library on my computer and chose not to delve into it much.&lt;/p&gt;
&lt;h2 id="conclusion"&gt;Conclusion&lt;/h2&gt;
&lt;p&gt;The series of experimental processes I went through greatly enhanced my
understanding of what happens behind the scenes when I simply press a key on my
physical keyboard.&lt;/p&gt;
&lt;p&gt;Returning to the initial scenario I described, when you&amp;rsquo;re developing a
program, you can act upon the values of key syms or key codes. While the key
codes might remain the same, the key syms (the meanings attached to those key
codes) can differ. It appears that some applications focus on key codes,
disregarding your local options.&lt;/p&gt;
&lt;p&gt;Essentially, at the kernel layer, there are only keycodes. Your operating
system assigns meaning to these keycodes through specific configuration files,
which you can either directly modify or use another program for modification
(in this case, the X Window Management server). Since it&amp;rsquo;s generally more
convenient to alter settings in the window management layer, most people
configure their preferences through utilities provided by their window manager,
and the window manager handles the interaction with the OS.&lt;/p&gt;
&lt;p&gt;This serves as a compelling example of how casually experimenting with things
can significantly contribute to one&amp;rsquo;s understanding of the core concepts they
are dealing with.&lt;/p&gt;</description></item><item><title>Reflections on My Journey into Software Development</title><link>https://rugu.dev/en/blog/computer-science-reflections/</link><pubDate>Fri, 22 Sep 2023 00:00:00 +0000</pubDate><guid>https://rugu.dev/en/blog/computer-science-reflections/</guid><description>&lt;p&gt;This blog post is a review of my journey into software development up until 2023-09-22. It is not intended to be a series of detailed explanations/guidelines for my career choices. Consider it more like personal reflections on events that shaped me as a developer. So, take the things that I say here with a grain of salt.&lt;/p&gt;
&lt;h1 id="my-first-introduction-to-programming"&gt;My First Introduction to Programming&lt;/h1&gt;
&lt;p&gt;I used to hang out with my &lt;a href="https://www.yuempek.com"&gt;cousin&lt;/a&gt; a lot when I was around 6 or 7 years old. He would always develop something cool whenever I saw him using his computer.&lt;/p&gt;
&lt;p&gt;Back then, I used to play &lt;a href="https://en.wikipedia.org/wiki/Peg_solitaire"&gt;Solo Test&lt;/a&gt; a lot. When I showed this game to my cousin, he thought about coding it and building a solution engine for it. He did both in front of my eyes. The game is still &lt;a href="http://yuempek.com/examples/javascript/solotest-Javascript.htm"&gt;available&lt;/a&gt; on his website. He was already one of my idols, but this was one of the moments that made me respect him even more. The idea of being able to build the things you like, the way you want, by this thing called &amp;ldquo;code&amp;rdquo; was fascinating.&lt;/p&gt;
&lt;p&gt;Not only did my cousin demonstrate coding, but he also encouraged me to make simple video games. He introduced me to a program called Macromedia Flash for this. I would try to make simple Flash games by following the YouTube videos I saw. Unfortunately, I would usually get stuck trying to make things exactly how I wanted due to my limited understanding. I would get frustrated, and&amp;hellip; would give up.&lt;/p&gt;
&lt;p&gt;I guess both my limited English and lack of patience were making it much harder for me to move forward. So my attention went to other hobbies that were easier to pick up. Playing games, reading books and creating pivot animations&amp;hellip;&lt;/p&gt;
&lt;h1 id="learning-javascript-when-i-was-in-highschool"&gt;Learning JavaScript when I was in Highschool&lt;/h1&gt;
&lt;p&gt;I was better suited to learning programming when I was in high school. I was more patient. I understood English a bit better. I had a growing interest in subjects like philosophy and mathematics. Having sophisticated interests I could already follow on my own was proof that programming could be added to them.&lt;/p&gt;
&lt;p&gt;I started learning JavaScript. This choice was because it was the only programming language that could be run in a web browser. My cousin also saw it as a great investment for the future. The high accessibility of learning materials for it was also another bonus.&lt;/p&gt;
&lt;p&gt;I don&amp;rsquo;t recall the exact sources I used. But the overall process was simple. First, I would try to understand a concept that I either found interesting or that my cousin suggested. These would be things like variables, conditionals, functions, and so on.. Once I felt comfortable, I would either ask my cousin for an assignment or come up with my own experiment to apply it. Then get his feedback on what I implemented. Re-iterate.&lt;/p&gt;
&lt;p&gt;The tasks would be simple, with small caveats. Like, not using built-in utilities like sorting or string functions. This was so that I had to re-implement them when I needed to and learn how things worked under the hood. This was a good approach. I think it was thanks to that my first year taking CS courses was very easy for me. I was already familiar with most of what was taught, so I had time to explore topics that interested me.&lt;/p&gt;
&lt;p&gt;If you are interested, some of the programs I wrote back in high school are still on my GitHub. You can check out &lt;a href="https://kugurerdem.github.io/canvas-js-experiments/"&gt;My Canvas Javascript Experiments&lt;/a&gt;, &lt;a href="https://kugurerdem.github.io/js-experiments/"&gt;Javascript Experiments&lt;/a&gt;, and some other projects like &lt;a href="https://kugurerdem.github.io/physics-v0/"&gt;Physics Simulator&lt;/a&gt;, &lt;a href="https://github.com/kugurerdem/conway-s-game-of-life"&gt;Conway&amp;rsquo;s Game of Life&lt;/a&gt;, &lt;a href="https://kugurerdem.github.io/Running-Game/"&gt;Running Game&lt;/a&gt;, &lt;a href="https://kugurerdem.github.io/text-machine/"&gt;Text Machine&lt;/a&gt;, &lt;a href="https://kugurerdem.github.io/Wolfram-s-Elementary-CA/"&gt;Wolfram&amp;rsquo;s Elementary Cellular Automata&lt;/a&gt;.&lt;/p&gt;
&lt;h1 id="studying-mathematics-at-college"&gt;Studying Mathematics at College&lt;/h1&gt;
&lt;p&gt;In Turkey, colleges admit students based on a central placement exam score. Unfortunately, I didn&amp;rsquo;t score high enough to get into the CS/CENG programs at the top universities. I was required to be in the top 0.1%, but I was only in the top 1%. My ranking just wasn&amp;rsquo;t good enough.&lt;/p&gt;
&lt;p&gt;I knew that I could learn on my own what a mediocre university would teach me anyway. The campus experience, being around other intellectual people, was important to me. I did not want to study CS at a mediocre university. So, I instead considered pursuing other degrees that interested me at top universities. Meanwhile, I would continue to learn software development on my own.&lt;/p&gt;
&lt;p&gt;My friend Ibrahim showed me that I could take CS electives alongside my math studies. And my ranking was sufficient for a Mathematics degree at one of the top universities in my country.&lt;/p&gt;
&lt;p&gt;So I ended up studying mathematics and also taking almost all the compulsory CS courses. The only two CS courses that I did not take were Operating Systems and the 4th-year Algorithms course. So, I kind of did something like a double major, but an unofficial one.&lt;/p&gt;
&lt;p&gt;I also wasn&amp;rsquo;t very worried about not having a CS diploma. I saw it as a valuable bonus rather than something required to qualify. I believed that as long as I had competence and knowledge in the subject, I would be able to land a job. Which later turned out to be true as well.&lt;/p&gt;
&lt;h1 id="my-first-projects"&gt;My First Projects&lt;/h1&gt;
&lt;p&gt;I started losing interest in pursuing an academic career during my third year of college. I simply realized there were better things I could be doing than trying to maintain a good GPA. I began focusing more on how I could put my programming skills to use. I also started thinking about what I could learn on my own that is both interesting and pragmatic.&lt;/p&gt;
&lt;p&gt;Coincidentally, I had just started investing in cryptocurrencies around that time (during Covid). This was when I first began learning about the concept of decentralized finance (DeFi). And with it, I realized that there could be many opportunities to automate. We started researching potential automation ideas and executing them with Ibrahim. He would usually handle the research, and I would usually handle the execution part with programming.&lt;/p&gt;
&lt;p&gt;We tried and experimented with many different ideas. &lt;sup id="fnref:1"&gt;&lt;a href="#fn:1" class="footnote-ref" role="doc-noteref"&gt;1&lt;/a&gt;&lt;/sup&gt; Some worked well, others did not. Our work was not professional, but these projects were still sophisticated enough to improve us. We became better both in programming and in research. For me, this was especially important. Because it functioned as a first-hand proof that I could actually put my programming knowledge into practical use.&lt;/p&gt;
&lt;h1 id="my-first-job"&gt;My first Job&lt;/h1&gt;
&lt;p&gt;So, I was already building software projects for earning money even before working at a job. Luckily, these experiences also made getting my first job much easier.&lt;/p&gt;
&lt;p&gt;I was discussing my recent projects with a friend who had a broader network than mine. He was surprised that I hadn&amp;rsquo;t applied for a software development job, given the things I was already doing at that time.&lt;/p&gt;
&lt;p&gt;He referred me to one of his connections who recently founded a startup.&lt;/p&gt;
&lt;p&gt;I succeeded both the technical and non-technical interviews. Then, started working as a part-time remote software developer there.&lt;/p&gt;
&lt;h1 id="a-new-mentor"&gt;A new Mentor&lt;/h1&gt;
&lt;p&gt;The company I worked for was getting a consultancy service from a cracked developer with the nickname &lt;a href="https://gwn.wtf/mortals.html"&gt;gwn&lt;/a&gt;.&lt;/p&gt;
&lt;p&gt;In &lt;a href="https://rugu.dev/en/blog/switching-to-archlinux/"&gt;Switching to Arch Linux&lt;/a&gt; essay, I already mentioned my first impression of him as follows;&lt;/p&gt;



 &lt;blockquote&gt;
 &lt;p&gt;About a year ago, I was invited to a pair coding session at the startup where
I was working. The developers were receiving consultancy from a strange
person. At one point, he took control of the screen sharing while reviewing
some of the pull requests that had been made to our codebase. When he shared
his screen, there was nothing but a black screen. Suddenly, a terminal screen
appeared with his keystrokes and he quickly began examining the codebase,
providing feedback on peopleâ€™s code at a speed I had never seen before. He was
able to jump between different files in an instant, examining the diffs that
were made in different git commits.&lt;/p&gt;
&lt;hr&gt;
&lt;p&gt;After seeing what I saw, I thought to myself, â€˜If I were able to develop and
refactor code at that speed, I would save a lot of time, I could have spent
more time thinking about the actual stuff with as little friction as possible.
I want to have this power.â€™ So I have looked at his CV and realized that he was
knowledgeable on topics that many developers, including myself, struggle with.
Influenced by this, I started asking him (he was our consultant, after all) as
many questions as I could and focused on the resources he suggested and the
technologies he used.&lt;/p&gt;

 &lt;/blockquote&gt;

&lt;p&gt;I began frequently asking him questions about software development. Sometimes, questions that are not even related to the job we were doing. For example, his opinions on different approaches to software development or some Linux stuff.&lt;/p&gt;
&lt;p&gt;He was usually more than willing to answer my questions. We got along well, and at some point, we even started working together on several projects. This has continued for quite some time.&lt;/p&gt;
&lt;p&gt;I actually learned a lot from working very close to him. I did not learn anything knowledge-wise that I would not have been able to learn on my own. But, I must say that I learned a lot in terms of developer habits, approach, and procedural knowledge.&lt;/p&gt;
&lt;p&gt;I think I was lucky enough to have both &lt;a href="http://yuempek.com"&gt;yuempek&lt;/a&gt; and &lt;a href="https://gwn.wtf/mortals.html"&gt;gwn&lt;/a&gt; as mentors at some point in my life.&lt;/p&gt;
&lt;h1 id="to-conclude"&gt;To Conclude&lt;/h1&gt;
&lt;p&gt;So, that was the story of how I first got into software development and the events that shaped me so far up until this point (2023-09-22). I look forward to what comes next. Thanks for reading. I hope this becomes helpful if you&amp;rsquo;re on a similar path.&lt;/p&gt;
&lt;div class="footnotes" role="doc-endnotes"&gt;
&lt;hr&gt;
&lt;ol&gt;
&lt;li id="fn:1"&gt;
&lt;p&gt;Some of the bots we built during that time included an IDO sniping bot for buying coins as soon as they were introduced to the market, a &lt;a href="https://github.com/kugurerdem/DVFBot"&gt;market-making bot&lt;/a&gt; for &lt;a href="https://rhino.fi/"&gt;DeversiFi&lt;/a&gt; to benefit from an airdrop program, an &lt;a href="https://github.com/kugurerdem/yakFarmer"&gt;automated reinvesting bot&lt;/a&gt; for the &lt;a href="https://yieldyak.com/"&gt;Yield Yak Auto Compounder&lt;/a&gt;, and a few other small automation bots.&amp;#160;&lt;a href="#fnref:1" class="footnote-backref" role="doc-backlink"&gt;&amp;#x21a9;&amp;#xfe0e;&lt;/a&gt;&lt;/p&gt;
&lt;/li&gt;
&lt;/ol&gt;
&lt;/div&gt;</description></item><item><title>On the Importance of Typing Fast</title><link>https://rugu.dev/en/blog/on-typing-fast/</link><pubDate>Fri, 03 Mar 2023 00:00:00 +0000</pubDate><guid>https://rugu.dev/en/blog/on-typing-fast/</guid><description>&lt;h2 id="typing-fast-is-important"&gt;Typing Fast is Important&lt;/h2&gt;
&lt;p&gt;It is often mentioned that the bottleneck in building software projects is not
one&amp;rsquo;s typing ability but ability to think clearly, and to design the
architecture effectively. Afterall, if typing speed was so essential to
programming, the time difference between rewriting an already existing project
with that of creating it from scratch would not be as high as it is.&lt;/p&gt;
&lt;p&gt;While I agree that typing speed is not essential to programming, I cannot
relate on how this fact is used by lots of people to justify their thinking of
typing fast being not important for the development process.&lt;/p&gt;
&lt;p&gt;The comparison made above between writing a project by scratch and rewriting an
already existing one, is good for showing that typing speed itself cannot be a
sufficient criteria for being a good developer. But what it does not show is
the unimportance of typing fast. In an an ideal setting, we could have compare
the development speed of developers who almost have the identical cognitive
abilities and experiences with different typing speeds. Unfortunately, I do not
heard any such experiments. So what I will do to show you the importance of
typing is instead will give you my arguments for it.&lt;/p&gt;
&lt;p&gt;First of all, programming is not just about thinking and designing systems but
also about debugging bugs, refactoring code, experimenting, and finally
researching or discussing stuff. One commonality of all these exercises is that
they are being iterative processes. Any programmer with a sufficient experience
would probably understand what this means. I remember countless times where I
needed to put debug logs lots of different places in the code, so that I can
exactly point source of the bugs. Same applies for experimenting with the tools
I am not used to so that I can get an idea about the inner workings of them.
Even searching stuff on the internet is often an iterative process where one
search leads to another prompt so that you can understand the related concepts.
All of these processes are usually proceed by trial and error, where in each
iteration you are somehow bottlenecked by the necessary actions that are needed
to be done in order to proceed to the next iteration. I think what typing speed
is esentially helpfull for is to reduce the time between those iterations.&lt;/p&gt;
&lt;p&gt;Yes, it&amp;rsquo;s essential to spend time on the architecture of the code, technology
stack, algorithms which will be used and requirement specifications. However
this doesn&amp;rsquo;t diminish the importance of typing fast. To the contrary, this just
makes typing fast more important because reducing the time spent on typing
would allow us to allocate more time to the essential works.&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;Even though typing itself is not so important, typing fast would still be one
of the most critical skills for developers because it reduces the time spent on
an insignificant task of typing.&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;This reasoning is similar to what &lt;em&gt;Hans Hoffman&lt;/em&gt; once said:&lt;/p&gt;



 &lt;blockquote&gt;
 &lt;p&gt;â€œThe ability to simplify means to eliminate the unnecessary so that the
necessary may speak.â€&lt;/p&gt;

 &lt;/blockquote&gt;

&lt;p&gt;Typing is the way we actualize our ideas into real programs.&lt;/p&gt;
&lt;p&gt;If you do not have the faculties to realise your ideas at the rate they occur,
then they can accumulate to a point where you eventually reach a position where
you have to abandon some of them. Essentially, the faster you can transform
your ideas into code and test them, the less likely you are to experience an
overflow of untested and undeveloped ideas.&lt;/p&gt;
&lt;h2 id="improving-typing-speed"&gt;Improving Typing Speed&lt;/h2&gt;
&lt;p&gt;Given that the typing speed of an average person is around 40 WPM, even
reaching 70-80 WPM would be a significant leap for most people. While pursuing
further improvements is still admirable, its important to be aware of that
there comes a point where the cost-effectiveness of pushing ones typing speed
diminishes, as the challenge escalates when you approach your personal limits.
Although having a personal average typing speed of 105 WPM on
&lt;a href="https://10fastfingers.com"&gt;10FastFingers&lt;/a&gt;, I still like to exercise typing
speed. But I do this as a kind of challenge rather than an expectation of being
more productive.&lt;/p&gt;
&lt;p&gt;The main advice I would like to give the people who want to improve their
typing speed is to learn touch typing, a technique where you become accustomed
to using all 10 of your fingers to type without looking at the keyboard.
Although increasing typing speed without a common technique like touch typing
is indeed possible, I still like to recommend touch typing as it is a
standardised way of typing which its know-how can also be transferred to other
people in a consistent way. I personally used sites like
&lt;a href="https://keybr.com"&gt;keybr&lt;/a&gt; and &lt;a href="https://www.typingclub.com/"&gt;typing club&lt;/a&gt; while
I was initially learning touch typing, whereas I still use
&lt;a href="10fastfingers.com"&gt;10FastFingers&lt;/a&gt; and &lt;a href="https://play.typeracer.com/"&gt;Type
Racer&lt;/a&gt; for exercise.&lt;/p&gt;
&lt;p&gt;For developers, I also strongly recommend becoming accustomed to using the
English keyboard layout even their native language is not English. Most
programming languages are designed to use symbols readily available on a US
keyboard, such as {}[]/`\&amp;quot;&amp;rsquo;, which may not be as easily accessible on other
layouts, (e.g. Turkish layout).&lt;/p&gt;</description></item></channel></rss>